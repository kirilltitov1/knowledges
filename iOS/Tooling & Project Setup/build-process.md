---
type: "thread"
topics: ["Tooling & Project Setup"]
status: "done"
summary: ""
title: "Build Process"
---

## üéØ –û–±—â–∏–π –æ–±–∑–æ—Ä

–ü—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã—Ö —Å—Ç–∞–¥–∏–π:

```
–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ (Swift/ObjC)
    ‚Üì
Preprocessing (–ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥)
    ‚Üì
Compilation (–∫–æ–º–ø–∏–ª—è—Ü–∏—è)
    ‚Üì
Linking (–ª–∏–Ω–∫–æ–≤–∫–∞)
    ‚Üì
Asset Compilation (–∫–æ–º–ø–∏–ª—è—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤)
    ‚Üì
Code Signing (–ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞)
    ‚Üì
Packaging (—É–ø–∞–∫–æ–≤–∫–∞)
    ‚Üì
.app / .ipa —Ñ–∞–π–ª
```---

## 1Ô∏è‚É£ Preprocessing (–ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥)

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∏—Ä–µ–∫—Ç–∏–≤ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (`#if`, `#define`, `#import`)
- –†–∞—Å–∫—Ä—ã—Ç–∏–µ –º–∞–∫—Ä–æ—Å–æ–≤ (–≤ Objective-C)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ª–æ–≤–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –í Swift
```swift
#if DEBUG
    print("Debug mode")
#elseif RELEASE
    print("Release mode")
#endif
```

### –í Objective-C
```objc
#ifdef DEBUG
    NSLog(@"Debug mode");
#endif
```

### Build Settings
- `GCC_PREPROCESSOR_DEFINITIONS` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- `SWIFT_ACTIVE_COMPILATION_CONDITIONS` - —É—Å–ª–æ–≤–∏—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –¥–ª—è Swift

---

## 2Ô∏è‚É£ Compilation (–ö–æ–º–ø–∏–ª—è—Ü–∏—è)

### 2.1 Swift Compilation

#### –°—Ç–∞–¥–∏–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ Swift
1. **Parsing** - –ø–∞—Ä—Å–∏–Ω–≥ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ AST (Abstract Syntax Tree)
2. **Semantic Analysis** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏–º–µ–Ω
3. **SIL Generation** (Swift Intermediate Language) - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
4. **SIL Optimization** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ SIL
5. **LLVM IR Generation** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è LLVM –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
6. **LLVM Optimization** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ LLVM
7. **Code Generation** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∞—à–∏–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ (ARM64)

#### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

**Whole Module Optimization (WMO)**
```bash
# –í–∫–ª—é—á–∞–µ—Ç—Å—è –≤ Release –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
SWIFT_COMPILATION_MODE = wholemodule
```
- –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç –≤–µ—Å—å –º–æ–¥—É–ª—å –∫–∞–∫ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å –±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –Ω–æ –±—ã—Å—Ç—Ä–µ–µ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π –∫–æ–¥

**Incremental Compilation**
```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Debug –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
SWIFT_COMPILATION_MODE = incremental
```
- –ü–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- –ë—ã—Å—Ç—Ä–µ–µ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç dependency graph –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- `.swiftmodule` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–¥—É–ª—è (–ø—É–±–ª–∏—á–Ω—ã–µ API)
- `.swiftdoc` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `.swiftsourceinfo` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö
- `.o` —Ñ–∞–π–ª—ã - –æ–±—ä–µ–∫—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã (–º–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥)

### 2.2 Objective-C Compilation

#### –°—Ç–∞–¥–∏–∏
1. **Preprocessing** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∏—Ä–µ–∫—Ç–∏–≤
2. **Lexical Analysis** - —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è
3. **Parsing** - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ AST
4. **Semantic Analysis** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
5. **Code Generation** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è LLVM IR
6. **Optimization** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
7. **Assembly Generation** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—Å—Å–µ–º–±–ª–µ—Ä–∞
8. **Object File Generation** - —Å–æ–∑–¥–∞–Ω–∏–µ .o —Ñ–∞–π–ª–æ–≤

#### –ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```bash
# –£—Ä–æ–≤–Ω–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
GCC_OPTIMIZATION_LEVEL = 0  # Debug: -O0
GCC_OPTIMIZATION_LEVEL = s  # Release: -Os (size)
GCC_OPTIMIZATION_LEVEL = 3  # Aggressive: -O3
```

### 2.3 Build Settings –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

```bash
# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
SWIFT_OPTIMIZATION_LEVEL = -Onone  # Debug
SWIFT_OPTIMIZATION_LEVEL = -O      # Release
SWIFT_OPTIMIZATION_LEVEL = -Osize  # Size optimization

# –î—Ä—É–≥–∏–µ –≤–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
ENABLE_BITCODE = NO  # Bitcode (deprecated –¥–ª—è iOS)
DEBUG_INFORMATION_FORMAT = dwarf-with-dsym  # Debug symbols
```

### 2.4 Generics (–î–∂–µ–Ω–µ—Ä–∏–∫–∏) - –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º

#### –ß—Ç–æ —Ç–∞–∫–æ–µ Generics –≤ Swift

```swift
// –ü—Ä–∏–º–µ—Ä –¥–∂–µ–Ω–µ—Ä–∏–∫ —Ñ—É–Ω–∫—Ü–∏–∏
func swap<T>(_ a: inout T, _ b: inout T) {
    let temp = a
    a = b
    b = temp
}

// –ü—Ä–∏–º–µ—Ä –¥–∂–µ–Ω–µ—Ä–∏–∫ —Ç–∏–ø–∞
struct Stack<Element> {
    private var items: [Element] = []
    
    mutating func push(_ item: Element) {
        items.append(item)
    }
    
    mutating func pop() -> Element? {
        return items.popLast()
    }
}
```

#### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º

##### 1. Generic Specialization (–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)

–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä Swift –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∂–µ–Ω–µ—Ä–∏–∫–∞–º–∏ –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:

**A. Static Specialization (–°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)**

```swift
// –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
let numbers = Stack<Int>()
let strings = Stack<String>()

// –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏:
struct Stack_Int {  // –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è Int
    private var items: [Int] = []
    func push(_ item: Int) { ... }
}

struct Stack_String {  // –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è String
    private var items: [String] = []
    func push(_ item: String) { ... }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –ù–µ—Ç runtime overhead
- –ü—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π (–±–µ–∑ –∫–æ—Å–≤–µ–Ω–Ω–æ—Å—Ç–∏)
- –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ò–Ω–ª–∞–π–Ω–∏–Ω–≥ –≤–æ–∑–º–æ–∂–µ–Ω

**–ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- Whole Module Optimization (WMO) –≤–∫–ª—é—á–µ–Ω
- –¢–∏–ø –∏–∑–≤–µ—Å—Ç–µ–Ω –Ω–∞ –º–æ–º–µ–Ω—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –í –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–≥–æ –º–æ–¥—É–ª—è

```bash
# Build Settings –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
SWIFT_COMPILATION_MODE = wholemodule
SWIFT_OPTIMIZATION_LEVEL = -O
```

**B. Dynamic Dispatch —á–µ—Ä–µ–∑ Protocol Witness Tables (PWT)**

–ö–æ–≥–¥–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ –º–æ–∂–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å (–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è dynamic dispatch:

```swift
// –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç "boxed" –≤–µ—Ä—Å–∏—é
struct Stack<Element> {
    // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Type Metadata –∏ Protocol Witness Tables
    private var items: [Element] = []  // Element - existential container
    
    func push(_ item: Element) {
        // –í—ã–∑–æ–≤ —á–µ—Ä–µ–∑ witness table
    }
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º:**

```
Stack<T>
    ‚Üì
Type Metadata –¥–ª—è T
    ‚Üì
Protocol Witness Table (–µ—Å–ª–∏ T: Protocol)
    ‚Üì
Value Witness Table (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é: copy, destroy, allocate)
    ‚Üì
Existential Container (–µ—Å–ª–∏ T > 3 —Å–ª–æ–≤–∞)
```

##### 2. Type Metadata

–ö–∞–∂–¥—ã–π —Ç–∏–ø –≤ Swift –∏–º–µ–µ—Ç runtime metadata:

```swift
// –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º –∫–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ –¥–∂–µ–Ω–µ—Ä–∏–∫ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞—ë—Ç metadata
func genericFunction<T>(_ value: T) {
    // –°–∫—Ä—ã—Ç—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä: Type Metadata –¥–ª—è T
    print(type(of: value))
}

// –ê—Å—Å–µ–º–±–ª–µ—Ä (—É–ø—Ä–æ—â—ë–Ω–Ω–æ):
// x0 = value
// x1 = Type Metadata –¥–ª—è T
// call genericFunction
```

**Type Metadata —Å–æ–¥–µ—Ä–∂–∏—Ç:**
- Size (—Ä–∞–∑–º–µ—Ä —Ç–∏–ø–∞)
- Alignment (–≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ)
- Value Witness Table (–æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–∞–º—è—Ç—å—é)
- Method dispatch table (–¥–ª—è –∫–ª–∞—Å—Å–æ–≤)

##### 3. Value Witness Table (VWT)

–¢–∞–±–ª–∏—Ü–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª—é–±—ã–º —Ç–∏–ø–æ–º:

```c
struct ValueWitnessTable {
    void (*initializeBufferWithCopyOfBuffer)(Buffer *dest, Buffer *src);
    void (*destroy)(T *object);
    void (*copy)(T *dest, T *src);
    size_t (*size)();
    size_t (*stride)();
    unsigned (*flags)();
    // ... –∏ –¥—Ä—É–≥–∏–µ
}
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```swift
func printSize<T>(_ value: T) {
    // –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º:
    // 1. –ü–æ–ª—É—á–∏—Ç—å Type Metadata –¥–ª—è T
    // 2. –ü—Ä–æ—á–∏—Ç–∞—Ç—å size –∏–∑ VWT
    // 3. –í—ã–≤–µ—Å—Ç–∏ —Ä–∞–∑–º–µ—Ä
    print(MemoryLayout<T>.size)
}

printSize(42)        // Type Metadata –¥–ª—è Int
printSize("hello")   // Type Metadata –¥–ª—è String
```

##### 4. Existential Containers

–î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞:

```swift
// Existential container (3 —Å–ª–æ–≤–∞ –¥–ª—è inline storage)
struct ExistentialContainer {
    var buffer: (Int, Int, Int)  // 24 –±–∞–π—Ç–∞ –¥–ª—è small values
    var metadata: TypeMetadata    // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ metadata
    var witnessTable: VWT*        // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ witness table
}

// –ï—Å–ª–∏ —Ç–∏–ø > 24 –±–∞–π—Ç–∞:
struct LargeExistentialContainer {
    var heapPointer: HeapObject*  // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∫—É—á—É
    var metadata: TypeMetadata
    var witnessTable: VWT*
}
```

**–ü—Ä–∏–º–µ—Ä:**

```swift
protocol Animal {
    func makeSound()
}

let animal: Animal = Dog()  // Existential container

// –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º:
// - Dog instance (–µ—Å–ª–∏ <= 24 –±–∞–π—Ç–∞, –≤ buffer; –∏–Ω–∞—á–µ –≤ heap)
// - Type Metadata –¥–ª—è Dog
// - Protocol Witness Table –¥–ª—è Dog: Animal
```

---

#### Generics –≤ Static Libraries (.a)

##### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

**–ö–æ–º–ø–∏–ª—è—Ü–∏—è:**
```bash
# –ü—Ä–∏ —Å–±–æ—Ä–∫–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
1. –î–∂–µ–Ω–µ—Ä–∏–∫ –∫–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ .o —Ñ–∞–π–ª—ã
2. –ù–û: –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ç–∏–ø–æ–≤
3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è "generic" –≤–µ—Ä—Å–∏—è (—Å metadata –∏ witness tables)
4. .swiftmodule —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–Ω–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é)
```

**–õ–∏–Ω–∫–æ–≤–∫–∞:**
```bash
# –ü—Ä–∏ –ª–∏–Ω–∫–æ–≤–∫–µ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
1. –í–µ—Å—å –∫–æ–¥ –∏–∑ .a –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ executable
2. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ú–û–ñ–ï–¢ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∂–µ–Ω–µ—Ä–∏–∫–∏
3. –ï—Å–ª–∏ WMO –≤–∫–ª—é—á–µ–Ω - –≤–æ–∑–º–æ–∂–Ω–∞ cross-module specialization
4. Dead code stripping –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
```

**–ü—Ä–∏–º–µ—Ä:**

```swift
// –í —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ MyLib.a
public struct Cache<Value> {
    public func get() -> Value? { ... }
}

// –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
import MyLib

let cache = Cache<User>()  // ‚úÖ –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
cache.get()  // –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ (–µ—Å–ª–∏ WMO –≤–∫–ª—é—á–µ–Ω)
```

##### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤

‚úÖ **–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤–∏–¥–∏—Ç –≤—Å—ë –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
```bash
# Whole Module Optimization –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
SWIFT_COMPILATION_MODE = wholemodule

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
- –ü–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤ –≤–æ–∑–º–æ–∂–Ω–∞
- –ò–Ω–ª–∞–π–Ω–∏–Ω–≥ –∫–æ–¥–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- Dead code stripping —Ä–∞–±–æ—Ç–∞–µ—Ç
- –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```

‚úÖ **–ù–µ—Ç ABI –ø—Ä–æ–±–ª–µ–º**
```swift
// –ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤ –±–µ–∑ breaking changes
// –ö–æ–¥ –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ
```

##### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

‚ùå **–ë–æ–ª—å—à–∏–π —Ä–∞–∑–º–µ—Ä –±–∏–Ω–∞—Ä–Ω–∏–∫–∞**
```bash
# –ö–∞–∂–¥–∞—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–¥
Cache<User>    ‚Üí Stack_User code
Cache<Post>    ‚Üí Stack_Post code
Cache<Comment> ‚Üí Stack_Comment code
```

‚ùå **–ú–µ–¥–ª–µ–Ω–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è**
```bash
# –ü–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
# –í–µ—Å—å –∫–æ–¥ –≤—Å—Ç—Ä–æ–µ–Ω –≤ executable
```

##### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

```bash
# 1. –í–∫–ª—é—á–∏—Ç—å WMO –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
SWIFT_COMPILATION_MODE = wholemodule

# 2. –†–∞–∑—Ä–µ—à–∏—Ç—å cross-module optimization
SWIFT_WHOLE_MODULE_OPTIMIZATION = YES

# 3. –í–∫–ª—é—á–∏—Ç—å LTO
LLVM_LTO = YES
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```swift
// –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
let cache = Cache<User>()
cache.get()  // ‚Üí –ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤, –±–µ–∑ overhead
```

##### –ö–∞–∫ –∏–º–µ–Ω–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏?

–≠—Ç–æ –≤–∞–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º –ø–æ—à–∞–≥–æ–≤–æ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

**–®–∞–≥ 1: –°–±–æ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**

```swift
// MyLib/Cache.swift
public struct Cache<Value> {
    private var storage: [Value] = []
    
    public func get() -> Value? {
        return storage.last
    }
    
    public mutating func set(_ value: Value) {
        storage.append(value)
    }
}
```

–ü—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
```bash
# –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ MyLib.a
swiftc -emit-library -static \
       Cache.swift \
       -o MyLib.a \
       -emit-module \
       -module-name MyLib

# –ß—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:
MyLib.a               # –°–æ–¥–µ—Ä–∂–∏—Ç GENERIC –≤–µ—Ä—Å–∏—é Cache<Value>
MyLib.swiftmodule     # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–¥—É–ª—è
MyLib.swiftdoc        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

**–ß—Ç–æ –≤ MyLib.a?**
```bash
# –í .a —Ñ–∞–π–ª–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è:
- Generic –≤–µ—Ä—Å–∏—è Cache (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å Type Metadata)
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Value Witness Tables
- –ú–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥, –Ω–æ –ë–ï–ó –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤
```

**–®–∞–≥ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏**

```swift
// App/main.swift
import MyLib

struct User {
    let name: String
}

struct Post {
    let title: String
}

let userCache = Cache<User>()      // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ #1
let postCache = Cache<Post>()      // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ #2
```

**–®–∞–≥ 3: –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ë–ï–ó WMO)**

```bash
# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
swiftc main.swift \
       -I . \
       -L . -lMyLib \
       -o MyApp

# –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
1. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤–∏–¥–∏—Ç Cache<User> –∏ Cache<Post>
2. –ù–û –Ω–µ –º–æ–∂–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å (–º–æ–¥—É–ª—å–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞)
3. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç generic –≤–µ—Ä—Å–∏—é –∏–∑ MyLib.a
4. –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Type Metadata
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```asm
; –í MyApp –±—É–¥–µ—Ç:
; - Generic –≤–µ—Ä—Å–∏—è Cache (–∏–∑ MyLib.a)
; - –í—ã–∑–æ–≤—ã —á–µ—Ä–µ–∑ metadata:

; userCache.get()
ldr  x8, [x0, #metadata]           ; –ó–∞–≥—Ä—É–∑–∏—Ç—å metadata –¥–ª—è User
bl   MyLib.Cache.get               ; –í—ã–∑–æ–≤ generic –≤–µ—Ä—Å–∏–∏
                                   ; –§—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç metadata
```

**–®–∞–≥ 4: –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–° WMO)**

```bash
# –ö–æ–º–ø–∏–ª—è—Ü–∏—è —Å Whole Module Optimization
swiftc main.swift \
       -I . \
       -L . -lMyLib \
       -o MyApp \
       -whole-module-optimization \
       -O

# –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
1. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤–∏–¥–∏—Ç Cache<User> –∏ Cache<Post>
2. –í–∏–¥–∏—Ç .swiftmodule —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
3. –ì–ï–ù–ï–†–ò–†–£–ï–¢ –°–ü–ï–¶–ò–ê–õ–ò–ó–ò–†–û–í–ê–ù–ù–´–ï –í–ï–†–°–ò–ò!
4. –°–æ–∑–¥–∞—ë—Ç Cache_User –∏ Cache_Post
5. –ó–∞–º–µ–Ω—è–µ—Ç –≤—ã–∑–æ–≤—ã –Ω–∞ –ø—Ä—è–º—ã–µ
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```asm
; –í MyApp —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç:

; –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è User
_MyLib.Cache<User>.get:
    ; –ü–†–Ø–ú–ê–Ø —Ä–∞–±–æ—Ç–∞ —Å User
    ldr  x0, [x1, #storage_offset]
    ret

; –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è Post  
_MyLib.Cache<Post>.get:
    ; –ü–†–Ø–ú–ê–Ø —Ä–∞–±–æ—Ç–∞ —Å Post
    ldr  x0, [x1, #storage_offset]
    ret

; userCache.get()
bl   _MyLib.Cache<User>.get        ; –ü–†–Ø–ú–û–ô –≤—ã–∑–æ–≤!
                                   ; –ù–µ—Ç metadata overhead
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π:**

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–∏–º–≤–æ–ª—ã –≤ –±–∏–Ω–∞—Ä–Ω–∏–∫–µ
nm MyApp | grep Cache

# –ë–ï–ó WMO —É–≤–∏–¥–∏—à—å:
_$s5MyLib5CacheV3getxyFTj  # Generic –≤–µ—Ä—Å–∏—è

# –° WMO —É–≤–∏–¥–∏—à—å:
_$s5MyLib5CacheV3get4UserVyFTj    # –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è User
_$s5MyLib5CacheV3get4PostVyFTj    # –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è Post
```

**–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç:**

‚úÖ **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –í –ü–†–ò–õ–û–ñ–ï–ù–ò–ò, –∞ –Ω–µ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ!**

```
Static Library (MyLib.a):
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Generic Cache<Value>        ‚îÇ  ‚Üê –û–¥–Ω–∞ –≤–µ—Ä—Å–∏—è
    ‚îÇ (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º —Ç–∏–ø–æ–º)    ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì –ª–∏–Ω–∫—É–µ—Ç—Å—è –≤
    
Application (MyApp):
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Cache<User>   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ  ‚Üê –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è 1
    ‚îÇ Cache<Post>   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ  ‚Üê –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è 2
    ‚îÇ Cache<Comment> ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ  ‚Üê –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è 3
    ‚îÇ                             ‚îÇ
    ‚îÇ (–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç      ‚îÇ
    ‚îÇ  —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥     ‚îÇ
    ‚îÇ  –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)      ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

##### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ (Foundation, SwiftUI, etc.)

**–í–ê–ñ–ù–û:** Foundation, UIKit, SwiftUI - —ç—Ç–æ **–ù–ï —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**!

–≠—Ç–æ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ —Å Module Stable ABI.

**–ß—Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –¥–ª—è –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤:**

```swift
// Foundation –¥–∂–µ–Ω–µ—Ä–∏–∫–∏
import Foundation

let array = Array<Int>([1, 2, 3])
let dict = Dictionary<String, Int>()
```

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**

```bash
# Foundation.framework —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
/System/Library/Frameworks/Foundation.framework/
‚îú‚îÄ‚îÄ Foundation (dylib)              # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
‚îî‚îÄ‚îÄ Modules/
    ‚îî‚îÄ‚îÄ Foundation.swiftmodule/
        ‚îî‚îÄ‚îÄ arm64.swiftinterface    # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ù–ï —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è!)
```

**–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ:**

1. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–∏–ø—ã —É–∂–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –≤ —Å–∏—Å—Ç–µ–º–µ**
   ```swift
   // Array, Dictionary, Set - —É–∂–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω—ã Apple
   // –í–∫–ª—é—á–∞—é—Ç —Ç–∏–ø–æ–≤—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (Int, String, etc.)
   let array = Array<Int>()  // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ç–æ–≤—É—é —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
   ```

2. **–î–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ç–∏–ø–æ–≤ - generic –≤–µ—Ä—Å–∏—è**
   ```swift
   struct MyType { }
   let array = Array<MyType>()  // Generic –≤–µ—Ä—Å–∏—è (–º–µ–¥–ª–µ–Ω–Ω–µ–µ)
   ```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–∏–º–≤–æ–ª—ã –≤ Foundation
nm /System/Library/Frameworks/Foundation.framework/Foundation | grep Array

# –£–≤–∏–¥–∏—à—å –º–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π:
_$sSa5countSivg    # Array.count
_$sSaMa            # Array metadata
# –ù–æ –ù–ï –¥–ª—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ç–∏–ø–æ–≤!
```

**–ü–æ—á–µ–º—É Foundation –±—ã—Å—Ç—Ä—ã–π?**

```swift
// –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–∏–ø—ã –∏–º–µ—é—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
let numbers = [1, 2, 3]        // Array<Int> - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
let strings = ["a", "b"]       // Array<String> - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
let dict = ["a": 1]            // Dictionary<String, Int> - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

// –†–µ–¥–∫–∏–µ —Ç–∏–ø—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç generic –≤–µ—Ä—Å–∏—é
struct Rare { }
let rares = [Rare()]           // Array<Rare> - generic –≤–µ—Ä—Å–∏—è
```

**Module Stable ABI:**

```bash
# –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:
1. Foundation —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω Apple
2. –ë–∏–Ω–∞—Ä–Ω–∏–∫ –æ–¥–∏–Ω –¥–ª—è –≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
3. –ù–ï –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. ABI –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

# –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å iOS (bug fixes)
- –î–µ–ª–∏—Ç—Å—è –º–µ–∂–¥—É –≤—Å–µ–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏
- –ú–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

# –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- –ù–µ—Ç full specialization –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ç–∏–ø–æ–≤
- Indirect dispatch –¥–ª—è —Ä–µ–¥–∫–∏—Ö —Ç–∏–ø–æ–≤
```

---

##### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: Static Library vs System Framework

| –ê—Å–ø–µ–∫—Ç | Static Library (.a) | System Framework |
|--------|---------------------|------------------|
| **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** | ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ | ‚ö†Ô∏è –¢–æ–ª—å–∫–æ –¥–ª—è —Ç–∏–ø–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | ‚úÖ –õ—É—á—à–∞—è (full specialization) | ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ |
| **–†–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** | ‚ùå –ë–æ–ª—å—à–µ (–∫–æ–¥ –≤—Å—Ç—Ä–æ–µ–Ω) | ‚úÖ –ú–µ–Ω—å—à–µ (–¥–µ–ª–∏—Ç—Å—è) |
| **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è** | ‚ùå –¢—Ä–µ–±—É–µ—Ç recompile | ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å iOS |
| **–ö–æ–º–ø–∏–ª—è—Ü–∏—è** | ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ | ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ |
| **ABI stability** | ‚úÖ –ù–µ –≤–∞–∂–Ω–∞ | ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ |

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä:**

```swift
// 1. Foundation (system framework)
let array = Array<Int>()      // ‚úÖ –ë—ã—Å—Ç—Ä–æ (—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ Apple)
array.append(1)

struct User { let id: Int }
let users = Array<User>()     // ‚ö†Ô∏è –ú–µ–¥–ª–µ–Ω–Ω–µ–µ (generic –≤–µ—Ä—Å–∏—è)
users.append(User(id: 1))

// 2. –í–∞—à–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
import MyLib

let cache = Cache<User>()     // ‚úÖ –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ MyApp!
cache.set(user)               // ‚úÖ Direct call (—Å WMO)
```

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**

```bash
# 1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
otool -L MyApp
# –£–≤–∏–¥–∏—à—å:
# /System/Library/Frameworks/Foundation.framework/Foundation (system)
# MyLib - –≤—Å—Ç—Ä–æ–µ–Ω –≤ executable

# 2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–∏–º–≤–æ–ª—ã
nm MyApp | grep "MyLib\|Foundation"
# MyLib —Å–∏–º–≤–æ–ª—ã - –≤ MyApp
# Foundation —Å–∏–º–≤–æ–ª—ã - undefined (–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ —Å–∏—Å—Ç–µ–º—ã)

# 3. –†–∞–∑–º–µ—Ä
size MyApp
# –í–∫–ª—é—á–∞–µ—Ç –≤–µ—Å—å –∫–æ–¥ –∏–∑ static libraries
# –ù–ï –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–¥ –∏–∑ system frameworks
```

---

##### Best Practices –¥–ª—è –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤

**1. –î–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç–µ:**

```swift
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ static library –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
// Build Settings:
MACH_O_TYPE = staticlib

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```

**2. –î–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ç–∏–ø–æ–≤:**

```swift
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–∏–ø—ã –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
let array = Array<Int>()     // ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
let dict = Dictionary<String, User>()  // ‚úÖ String –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω
```

**3. –î–ª—è performance-critical –∫–æ–¥–∞:**

```swift
// –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ @inlinable –≤–µ—Ä—Å–∏–∏
@inlinable
public func fastOperation<T>(_ value: T) {
    // –ö–æ–¥ –∏–Ω–ª–∞–π–Ω–∏—Ç—Å—è, –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
}
```

**4. –ò–∑–º–µ—Ä—è–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**

```swift
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Instruments Time Profiler
// –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞:
// - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ indirect calls
// - swift_getTypeByMangledName (overhead)
// - Witness table lookups
```

---

##### Incremental vs WMO —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏

**–í–∞–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å:** –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Incremental –≤–º–µ—Å—Ç–æ WMO?

**–ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç:** ‚úÖ **–î–∞, –º–æ–∂–Ω–æ!** Incremental - —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è Debug.

---

**Incremental Compilation Mode**

```bash
# Build Settings
SWIFT_COMPILATION_MODE = incremental

# –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:
- –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
- –ü–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ë—ã—Å—Ç—Ä–µ–µ —Å–±–æ—Ä–∫–∞ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ù–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏:**

**1. Static Library + Incremental –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏**

```bash
# –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: MyLib.a (—Å–æ–¥–µ—Ä–∂–∏—Ç generic –∫–æ–¥)
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: SWIFT_COMPILATION_MODE = incremental

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Incremental)               ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ main.swift                             ‚îÇ
‚îÇ   let cache = Cache<User>()            ‚îÇ
‚îÇ   ‚Üì                                    ‚îÇ
‚îÇ –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –û–¢–î–ï–õ–¨–ù–û –æ—Ç –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤‚îÇ
‚îÇ –ù–ï–¢ cross-file –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π             ‚îÇ
‚îÇ ‚ùå –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –û–ì–†–ê–ù–ò–ß–ï–ù–ê            ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ user.swift                             ‚îÇ
‚îÇ   let cache2 = Cache<User>()           ‚îÇ
‚îÇ   ‚Üì                                    ‚îÇ
‚îÇ –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –û–¢–î–ï–õ–¨–ù–û                 ‚îÇ
‚îÇ –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –î–£–ë–õ–ò–†–£–Æ–©–£–Æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```swift
// main.swift —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω
Cache<User>.get()  // ‚ö†Ô∏è –ú–æ–∂–µ—Ç –±—ã—Ç—å generic –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
                   // –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Ç–∏–ø–∞ –≤ —Ñ–∞–π–ª–µ

// user.swift —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –æ—Ç–¥–µ–ª—å–Ω–æ
Cache<User>.get()  // ‚ö†Ô∏è –ú–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```

**–ß—Ç–æ —Ç–µ—Ä—è–µ—Ç—Å—è:**
- ‚ùå –ú–µ–Ω—å—à–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π (–Ω–µ –≤–∏–¥–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö)
- ‚ùå –ù–µ—Ç devirtualization
- ‚ùå –ù–µ—Ç cross-file inlining
- ‚ùå –ú–æ–∂–µ—Ç –±—ã—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- ‚ö†Ô∏è Generic –≤–µ—Ä—Å–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–∞—â–µ

**–ß—Ç–æ –æ—Å—Ç–∞—ë—Ç—Å—è:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å generic –≤–µ—Ä—Å–∏—è)
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞
- ‚úÖ Intra-file –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞)

---

**2. Static Library + WMO –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏**

```bash
# –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: MyLib.a (—Å–æ–¥–µ—Ä–∂–∏—Ç generic –∫–æ–¥)
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: SWIFT_COMPILATION_MODE = wholemodule

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Whole Module)              ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤–∏–¥–∏—Ç –í–°–ï —Ñ–∞–π–ª—ã —Å—Ä–∞–∑—É:      ‚îÇ
‚îÇ main.swift: Cache<User>                ‚îÇ
‚îÇ user.swift: Cache<User>                ‚îÇ
‚îÇ post.swift: Cache<Post>                ‚îÇ
‚îÇ   ‚Üì                                    ‚îÇ
‚îÇ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è          ‚îÇ
‚îÇ ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:           ‚îÇ
‚îÇ    - Cache<User>  (–æ–¥–Ω–∞ –¥–ª—è –≤—Å–µ—Ö)      ‚îÇ
‚îÇ    - Cache<Post>                       ‚îÇ
‚îÇ ‚úÖ Direct calls –≤–µ–∑–¥–µ                  ‚îÇ
‚îÇ ‚úÖ –ò–Ω–ª–∞–π–Ω–∏–Ω–≥ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```swift
// –í–µ–∑–¥–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
Cache<User>.get()  // ‚úÖ Direct call –∫ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
Cache<Post>.get()  // ‚úÖ Direct call –∫ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```

---

**3. Dynamic Framework (–≤—Å–µ–≥–¥–∞ generic!)**

```bash
# Framework: MyFramework.framework
# –ù–ï–í–ê–ñ–ù–û —á—Ç–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: incremental –∏–ª–∏ WMO

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Framework (—Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –æ—Ç–¥–µ–ª—å–Ω–æ)     ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ Cache<Value> - –¢–û–õ–¨–ö–û generic –≤–µ—Ä—Å–∏—è   ‚îÇ
‚îÇ ‚ùå –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã            ‚îÇ
‚îÇ ‚ùå –ó–∞–∫—Ä—ã—Ç–∞—è –º–æ–¥—É–ª—å–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ                             ‚îÇ
‚îÇ (incremental –ò–õ–ò wholemodule)          ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ let cache = Cache<User>()              ‚îÇ
‚îÇ ‚ùå –ù–ï –º–æ–∂–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å           ‚îÇ
‚îÇ ‚ùå –í—Å–µ–≥–¥–∞ indirect dispatch            ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ –†–µ–∂–∏–º –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –ù–ï –í–ê–ñ–ï–ù!             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

**–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | App: Incremental | App: WMO | –†–∞–∑–Ω–∏—Ü–∞ |
|------------|------------------|----------|---------|
| **Static Library** | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω | **2-3x** |
| **Dynamic Framework** | ‚ùå Generic (indirect) | ‚ùå Generic (indirect) | –û–¥–∏–Ω–∞–∫–æ–≤–æ –º–µ–¥–ª–µ–Ω–Ω–æ |
| **System Framework** | ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ | ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ | –û–¥–∏–Ω–∞–∫–æ–≤–æ |

---

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã**

**–ü—Ä–∏–º–µ—Ä 1: Static Library —Å Incremental**

```swift
// MyLib.a
public struct Cache<Value> {
    public func get() -> Value? { ... }
}

// App (SWIFT_COMPILATION_MODE = incremental)
// File: UserScreen.swift
import MyLib

struct User { let name: String }

func loadUser() {
    let cache = Cache<User>()  // ‚ö†Ô∏è –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ –≠–¢–û–ú —Ñ–∞–π–ª–µ
    cache.get()                // ‚ö†Ô∏è –ò–ª–∏ generic –≤–µ—Ä—Å–∏—è
}

// File: PostScreen.swift
import MyLib

func loadPost() {
    let cache = Cache<User>()  // ‚ö†Ô∏è –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –î–£–ë–õ–ò–†–£–Æ–©–£–Æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
    cache.get()                // ‚ö†Ô∏è –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ UserScreen.swift
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
```bash
# –ö–æ–º–ø–∏–ª—è—Ü–∏—è
swiftc UserScreen.swift -c -o UserScreen.o  # –û—Ç–¥–µ–ª—å–Ω–æ
swiftc PostScreen.swift -c -o PostScreen.o  # –û—Ç–¥–µ–ª—å–Ω–æ

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# - –ú–æ–∂–µ—Ç –±—ã—Ç—å 2 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Cache<User> (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
# - –ò–ª–∏ –æ–±–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç generic –≤–µ—Ä—Å–∏—é (–º–µ–¥–ª–µ–Ω–Ω–µ–µ)
# - –ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
```

**–ü—Ä–∏–º–µ—Ä 2: Static Library —Å WMO**

```swift
// –¢–æ –∂–µ —Å–∞–º–æ–µ, –Ω–æ —Å WMO

// App (SWIFT_COMPILATION_MODE = wholemodule)
// –í—Å–µ —Ñ–∞–π–ª—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –≤–º–µ—Å—Ç–µ

// –ö–æ–º–ø–∏–ª—è—Ü–∏—è
swiftc UserScreen.swift PostScreen.swift -whole-module-optimization -o MyApp

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# ‚úÖ –û–î–ù–ê —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Cache<User> –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
# ‚úÖ Direct calls –≤–µ–∑–¥–µ
# ‚úÖ –ò–Ω–ª–∞–π–Ω–∏–Ω–≥ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
# ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```

---

**–ü—Ä–∏–º–µ—Ä 3: Dynamic Framework (—Ä–µ–∂–∏–º –Ω–µ –≤–∞–∂–µ–Ω)**

```swift
// MyFramework.framework (—Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω)
public struct Cache<Value> {
    public func get() -> Value? { ... }
}

// App (–õ–Æ–ë–û–ô —Ä–µ–∂–∏–º: incremental –ò–õ–ò wholemodule)
import MyFramework

let cache = Cache<User>()
cache.get()  // ‚ùå –í–°–ï–ì–î–ê indirect dispatch
             // ‚ùå –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∂–∏–º–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

---

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Incremental?**

‚úÖ **–ò–°–ü–û–õ–¨–ó–£–ô–¢–ï Incremental –∫–æ–≥–¥–∞:**

1. **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ / Debug —Å–±–æ—Ä–∫–∞**
   ```bash
   # Debug Configuration
   SWIFT_COMPILATION_MODE = incremental
   SWIFT_OPTIMIZATION_LEVEL = -Onone
   
   # –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
   - –ë—ã—Å—Ç—Ä–∞—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
   - –ë—ã—Å—Ç—Ä–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è
   - Debug symbols –ø–æ–ª–Ω—ã–µ
   ```

2. **–ë–æ–ª—å—à–∏–µ –ø—Ä–æ–µ–∫—Ç—ã (–¥–ª–∏—Ç–µ–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞)**
   ```bash
   # –ï—Å–ª–∏ WMO —Å–±–æ—Ä–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç > 5 –º–∏–Ω—É—Ç
   # Incremental –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ 5-10x –±—ã—Å—Ç—Ä–µ–µ
   ```

3. **CI –¥–ª—è feature –≤–µ—Ç–æ–∫ (–Ω–µ release)**
   ```bash
   # –£—Å–∫–æ—Ä–∏—Ç—å feedback loop
   # –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   ```

4. **–†–∞–±–æ—Ç–∞ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ñ–∞–π–ª–æ–≤**
   ```bash
   # –ò–∑–º–µ–Ω–∏–ª 1 —Ñ–∞–π–ª –∏–∑ 1000
   # Incremental: –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç 1 —Ñ–∞–π–ª (~2 —Å–µ–∫)
   # WMO: –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç –≤—Å–µ (~5 –º–∏–Ω—É—Ç)
   ```

---

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WMO?**

‚úÖ **–ò–°–ü–û–õ–¨–ó–£–ô–¢–ï WMO –∫–æ–≥–¥–∞:**

1. **Release / Production —Å–±–æ—Ä–∫–∞**
   ```bash
   # Release Configuration
   SWIFT_COMPILATION_MODE = wholemodule
   SWIFT_OPTIMIZATION_LEVEL = -O
   
   # –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤
   - Devirtualization
   - –ú–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä –±–∏–Ω–∞—Ä–Ω–∏–∫–∞
   ```

2. **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ —Å –¥–∂–µ–Ω–µ—Ä–∏–∫–∞–º–∏)**
   ```bash
   # –ß—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
   ```

3. **Performance-critical –∫–æ–¥**
   ```bash
   # –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–∞
   ```

4. **CI –¥–ª—è release –≤–µ—Ç–æ–∫**
   ```bash
   # Production builds
   # App Store uploads
   ```

---

**–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ —Ä–µ–∂–∏–º—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π:

```bash
# Debug Configuration
SWIFT_COMPILATION_MODE = incremental        # –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞
SWIFT_OPTIMIZATION_LEVEL = -Onone          # –ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π
ENABLE_TESTABILITY = YES                   # Testing enabled

# Release Configuration  
SWIFT_COMPILATION_MODE = wholemodule       # –ü–æ–ª–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
SWIFT_OPTIMIZATION_LEVEL = -O              # Aggressive optimization
ENABLE_TESTABILITY = NO                    # Testing disabled
DEAD_CODE_STRIPPING = YES                  # Strip unused
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (Incremental –≤ Debug)
- ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç (WMO –≤ Release)
- ‚úÖ –õ—É—á—à–µ–µ –∏–∑ –æ–±–æ–∏—Ö –º–∏—Ä–æ–≤

---

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?**

```bash
# 1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å Build Settings
xcodebuild -showBuildSettings \
    -workspace MyApp.xcworkspace \
    -scheme MyApp \
    -configuration Debug | grep SWIFT_COMPILATION_MODE

# Incremental –ø–æ–∫–∞–∂–µ—Ç:
SWIFT_COMPILATION_MODE = singlefile

# WMO –ø–æ–∫–∞–∂–µ—Ç:
SWIFT_COMPILATION_MODE = wholemodule

# 2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å build log
# Incremental: –º–Ω–æ–≥–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤
# WMO: –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞ "Compiling Swift module"

# 3. –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏
# Clean build:
#   Incremental: –±—ã—Å—Ç—Ä–µ–µ
#   WMO: –º–µ–¥–ª–µ–Ω–Ω–µ–µ
# Incremental rebuild (1 —Ñ–∞–π–ª –∏–∑–º–µ–Ω—ë–Ω):
#   Incremental: –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ
#   WMO: –¥–æ–ª–≥–æ (–≤—Å–µ —Ñ–∞–π–ª—ã)
```

---

**–ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**

```bash
# 1. –°–±–æ—Ä–∫–∞ —Å Incremental
xcodebuild -configuration Debug SWIFT_COMPILATION_MODE=incremental

# 2. –ó–∞–ø—É—Å–∫ –≤ Instruments Time Profiler
instruments -t "Time Profiler" MyApp.app

# 3. –ò—â–∏—Ç–µ:
# - –ú–Ω–æ–≥–æ –≤—ã–∑–æ–≤–æ–≤ swift_getTypeByMangledName (generic overhead)
# - –ú–Ω–æ–≥–æ indirect calls —á–µ—Ä–µ–∑ witness tables
# - –ú–µ–Ω—å—à–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π

# 4. –°–±–æ—Ä–∫–∞ —Å WMO
xcodebuild -configuration Release SWIFT_COMPILATION_MODE=wholemodule

# 5. –°—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
# - –ú–µ–Ω—å—à–µ generic overhead
# - –ë–æ–ª—å—à–µ direct calls
# - –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```

---

**Best Practice: Progressive Compilation**

–î–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ progressive –ø–æ–¥—Ö–æ–¥:

```bash
# –≠—Ç–∞–ø 1: Development (–±—ã—Å—Ç—Ä–æ)
SWIFT_COMPILATION_MODE = incremental

# –≠—Ç–∞–ø 2: Pre-release testing (–±–∞–ª–∞–Ω—Å)
SWIFT_COMPILATION_MODE = incremental
SWIFT_OPTIMIZATION_LEVEL = -O  # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤–∫–ª—é—á–µ–Ω—ã

# –≠—Ç–∞–ø 3: Release candidate (–º–∞–∫—Å–∏–º—É–º)
SWIFT_COMPILATION_MODE = wholemodule
SWIFT_OPTIMIZATION_LEVEL = -O
LLVM_LTO = YES  # Link-time optimization

# –≠—Ç–∞–ø 4: App Store
# –¢–µ –∂–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á—Ç–æ –∏ –≠—Ç–∞–ø 3
```

---

**–í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã**

1. **Incremental –ù–ï –õ–û–ú–ê–ï–¢ –Ω–∏—á–µ–≥–æ**
   ```swift
   // –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ
   // –ü—Ä–æ—Å—Ç–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ –∏ –±–æ–ª—å—à–µ —Ä–∞–∑–º–µ—Ä
   ```

2. **WMO –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –±–æ–ª—å—à–µ –æ—à–∏–±–æ–∫**
   ```swift
   // WMO –¥–µ–ª–∞–µ—Ç –±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑
   // –ú–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ dead code, unused variables
   ```

3. **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤—Å–µ–≥–¥–∞ –∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–ª—è production**
   ```bash
   # –î–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Debug
   # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
   ```

4. **CI/CD —Å—Ç—Ä–∞—Ç–µ–≥–∏—è**
   ```bash
   # Pull Request: Incremental (–±—ã—Å—Ç—Ä—ã–π feedback)
   # Main branch: WMO (production quality)
   # Nightly builds: WMO + –≤—Å–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
   ```

---

#### Generics –≤ Dynamic Frameworks (.framework)

##### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

**–ö–æ–º–ø–∏–ª—è—Ü–∏—è:**
```bash
# –ü—Ä–∏ —Å–±–æ—Ä–∫–µ dynamic framework
1. –î–∂–µ–Ω–µ—Ä–∏–∫ –∫–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –ë–ï–ó –∑–Ω–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤
2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û generic –≤–µ—Ä—Å–∏—è (—Å metadata/witness tables)
3. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ù–ï–í–û–ó–ú–û–ñ–ù–ê (closed module boundary)
4. .swiftmodule —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
5. .dylib —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—à–∏–Ω–Ω—ã–π –∫–æ–¥
```

**Runtime:**
```bash
# –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
1. dyld –∑–∞–≥—Ä—É–∂–∞–µ—Ç framework
2. –í—Å–µ –≤—ã–∑–æ–≤—ã –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤ –∏–¥—É—Ç —á–µ—Ä–µ–∑:
   - Type Metadata
   - Protocol Witness Tables
   - Value Witness Tables
3. Indirect dispatch (–º–µ–¥–ª–µ–Ω–Ω–µ–µ)
4. –ù–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```

**–ü—Ä–∏–º–µ—Ä:**

```swift
// –í dynamic framework MyFramework.framework
public struct Cache<Value> {
    public func get() -> Value? {
        // –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ generic –≤–µ—Ä—Å–∏—é
        // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Type Metadata –¥–ª—è Value
    }
}

// –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
import MyFramework

let cache = Cache<User>()  // ‚ùå –ù–ï –±—É–¥–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
cache.get()  // Indirect dispatch —á–µ—Ä–µ–∑ witness tables
```

##### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º

**1. –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ –ø–µ—Ä–µ–¥–∞—ë—Ç metadata:**

```swift
// –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
let cache = Cache<User>()
cache.get()

// –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º (—É–ø—Ä–æ—â—ë–Ω–Ω–æ):
// x0 = cache instance
// x1 = Type Metadata –¥–ª—è User  ‚Üê –í–°–ï–ì–î–ê –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è!
// call MyFramework.Cache.get(metadata: TypeMetadata)
```

**2. Framework –∏—Å–ø–æ–ª—å–∑—É–µ—Ç metadata:**

```c
// –í framework (–ø—Å–µ–≤–¥–æ–∫–æ–¥ –Ω–∞ C)
void* Cache_get(void* cache, TypeMetadata* T) {
    // –ü–æ–ª—É—á–∏—Ç—å Value Witness Table –∏–∑ T
    ValueWitnessTable* vwt = T->valueWitnessTable;
    
    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VWT –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å Value
    size_t size = vwt->size();
    void* value = malloc(size);
    vwt->copy(value, cache->storage);
    
    return value;
}
```

**3. Protocol Witness Tables –¥–ª—è constraints:**

```swift
// –í framework
public func process<T: Codable>(_ value: T) {
    // –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º:
    // - Type Metadata –¥–ª—è T
    // - Protocol Witness Table –¥–ª—è T: Codable
    let encoder = JSONEncoder()
    try? encoder.encode(value)  // –í—ã–∑–æ–≤ —á–µ—Ä–µ–∑ PWT
}

// –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
process(user)  // –ü–µ—Ä–µ–¥–∞—ë—Ç PWT –¥–ª—è User: Codable
```

##### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

‚ùå **Runtime overhead:**

```swift
// Static library (—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
cache.get()  
// ‚Üí –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤: call 0x12345678
// ‚Üí –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω–ª–∞–π–Ω–µ–Ω
// ‚Üí 1-2 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

// Dynamic framework (generic)
cache.get()
// ‚Üí –∑–∞–≥—Ä—É–∑–∏—Ç—å metadata: ldr x1, [metadata]
// ‚Üí –∑–∞–≥—Ä—É–∑–∏—Ç—å witness table: ldr x2, [x1, #offset]
// ‚Üí –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é: ldr x3, [x2, #offset]
// ‚Üí indirect call: blr x3
// ‚Üí 10+ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω–ª–∞–π–Ω–µ–Ω
```

**Benchmark (–ø—Ä–∏–º–µ—Ä–Ω—ã–π):**
```
Static specialized:  1.0x
Dynamic generic:     2-5x –º–µ–¥–ª–µ–Ω–Ω–µ–µ
```

##### Direct vs Indirect Call/Access

–≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ –≤ —Ç–æ–º, –∫–∞–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–¥.

**Direct Call (–ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤)**

```swift
// –ö–æ–¥ Swift
func calculate() -> Int {
    return 42
}

let result = calculate()  // –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤
```

**–ê—Å—Å–µ–º–±–ª–µ—Ä (ARM64):**
```asm
; –ê–¥—Ä–µ—Å —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑–≤–µ—Å—Ç–µ–Ω –Ω–∞ –º–æ–º–µ–Ω—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
bl   0x100004abc        ; Branch and Link - –ø—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥
; 0x100004abc - —ç—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∞–¥—Ä–µ—Å —Ñ—É–Ω–∫—Ü–∏–∏

; CPU –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
; 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞–¥—Ä–µ—Å 0x100004abc –≤ Program Counter (PC)
; 2. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–¥—Ä–µ—Å –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ Link Register (LR)
; 3. –ù–∞—á–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
; ‚Üí 1 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, ~1-2 CPU —Ü–∏–∫–ª–∞
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- ‚úÖ –ê–¥—Ä–µ—Å –∏–∑–≤–µ—Å—Ç–µ–Ω –Ω–∞ –º–æ–º–µ–Ω—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –º–æ–∂–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ (branch prediction)
- ‚úÖ –ú–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω–ª–∞–π–Ω–µ–Ω –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º
- ‚úÖ –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ: 1-2 CPU —Ü–∏–∫–ª–∞
- ‚úÖ Pipeline –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è

**Indirect Call (–ö–æ—Å–≤–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤)**

```swift
// –ö–æ–¥ Swift (—á–µ—Ä–µ–∑ witness table)
protocol Calculator {
    func calculate() -> Int
}

func process(_ calc: Calculator) {
    let result = calc.calculate()  // –ö–æ—Å–≤–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤
}
```

**–ê—Å—Å–µ–º–±–ª–µ—Ä (ARM64):**
```asm
; –ê–¥—Ä–µ—Å —Ñ—É–Ω–∫—Ü–∏–∏ –ù–ï –∏–∑–≤–µ—Å—Ç–µ–Ω –Ω–∞ –º–æ–º–µ–Ω—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
; –ù—É–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –µ–≥–æ –∏–∑ –ø–∞–º—è—Ç–∏

; –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∏—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ witness table
ldr  x8, [x0, #metadata_offset]     ; x0 = existential container
                                    ; x8 = protocol witness table

; –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∏—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ witness table
ldr  x9, [x8, #function_offset]     ; x9 = –∞–¥—Ä–µ—Å —Ñ—É–Ω–∫—Ü–∏–∏ calculate

; –®–∞–≥ 3: –ö–æ—Å–≤–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤ —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä
blr  x9                              ; Branch and Link Register
                                    ; –í—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ –∞–¥—Ä–µ—Å—É –≤ x9

; CPU –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
; 1. –ß—Ç–µ–Ω–∏–µ –∏–∑ –ø–∞–º—è—Ç–∏ (ldr) - –º–æ–∂–µ—Ç –±—ã—Ç—å cache miss
; 2. –ï—â—ë –æ–¥–Ω–æ —á—Ç–µ–Ω–∏–µ –∏–∑ –ø–∞–º—è—Ç–∏ (ldr) - –µ—â—ë –æ–¥–∏–Ω cache miss
; 3. –ö–æ—Å–≤–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ (blr) - branch predictor –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ
; ‚Üí 3+ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, ~10-20 CPU —Ü–∏–∫–ª–æ–≤ (—Å —É—á—ë—Ç–æ–º cache misses)
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- ‚ùå –ê–¥—Ä–µ—Å –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω –¥–æ runtime
- ‚ùå –¢—Ä–µ–±—É–µ—Ç —á—Ç–µ–Ω–∏–µ –∏–∑ –ø–∞–º—è—Ç–∏ (–º–æ–∂–µ—Ç –±—ã—Ç—å cache miss)
- ‚ùå Branch predictor —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö—É–∂–µ
- ‚ùå –ù–ï –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω–ª–∞–π–Ω–µ–Ω
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–æ: 10-20+ CPU —Ü–∏–∫–ª–æ–≤
- ‚ùå Pipeline –º–æ–∂–µ—Ç –ª–æ–º–∞—Ç—å—Å—è (branch misprediction)

---

**Direct Access (–ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞–º—è—Ç–∏)**

```swift
// @frozen struct - layout –∏–∑–≤–µ—Å—Ç–µ–Ω
@frozen
public struct Point {
    public var x: Double  // offset = 0
    public var y: Double  // offset = 8
}

let point = Point(x: 10, y: 20)
let value = point.x  // –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø
```

**–ê—Å—Å–µ–º–±–ª–µ—Ä (ARM64):**
```asm
; point –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ –∞–¥—Ä–µ—Å—É –≤ x0
ldr  d0, [x0]           ; –ü—Ä—è–º–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ x0 + 0
                        ; d0 = point.x

; CPU –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
; 1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∏–∑ –ø–∞–º—è—Ç–∏ –ø–æ –∞–¥—Ä–µ—Å—É x0
; ‚Üí 1 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, ~3-5 CPU —Ü–∏–∫–ª–æ–≤ (L1 cache hit)
```

**Indirect Access (–ö–æ—Å–≤–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø)**

```swift
// Resilient struct - layout —Å–∫—Ä—ã—Ç
public struct Cache<Value> {
    private var storage: [Value]
}

let cache = Cache<User>()
let value = cache.storage  // –ö–æ—Å–≤–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ accessor
```

**–ê—Å—Å–µ–º–±–ª–µ—Ä (ARM64):**
```asm
; –ù—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å accessor —Ñ—É–Ω–∫—Ü–∏—é
; –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å Type Metadata
ldr  x8, [x0, #metadata_offset]

; –®–∞–≥ 2: –ü–æ–ª—É—á–∏—Ç—å accessor –∏–∑ metadata
ldr  x9, [x8, #accessor_offset]

; –®–∞–≥ 3: –í—ã–∑–≤–∞—Ç—å accessor
blr  x9                     ; –ö–æ—Å–≤–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤

; –®–∞–≥ 4: –í–Ω—É—Ç—Ä–∏ accessor
;   - –í—ã—á–∏—Å–ª–∏—Ç—å offset –¥–ª—è Value —Å —É—á—ë—Ç–æ–º alignment
;   - –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
;   - –í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

; ‚Üí 10+ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, ~20-30 CPU —Ü–∏–∫–ª–æ–≤
```

---

**–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞**

| –û–ø–µ—Ä–∞—Ü–∏—è | Direct | Indirect | –†–∞–∑–Ω–∏—Ü–∞ |
|----------|--------|----------|---------|
| **Function Call** | `bl 0x1234` | `ldr x9, [table]; blr x9` | **10-20x** –º–µ–¥–ª–µ–Ω–Ω–µ–µ |
| **Field Access** | `ldr d0, [x0]` | `call accessor` | **5-10x** –º–µ–¥–ª–µ–Ω–Ω–µ–µ |
| **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–π** | 1-2 | 5-15 | - |
| **CPU —Ü–∏–∫–ª–æ–≤** | 1-5 | 10-50+ | - |
| **–ò–Ω–ª–∞–π–Ω–∏–Ω–≥** | ‚úÖ –í–æ–∑–º–æ–∂–µ–Ω | ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–µ–Ω | - |
| **Branch prediction** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ | ‚ùå –†–∞–±–æ—Ç–∞–µ—Ç –ø–ª–æ—Ö–æ | - |
| **Cache locality** | ‚úÖ –•–æ—Ä–æ—à–∞—è | ‚ùå –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–ª–æ—Ö–æ–π | - |

---

**–†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä: Protocol dispatch**

```swift
// Protocol —Å –º–µ—Ç–æ–¥–æ–º
protocol Drawable {
    func draw()
}

class Circle: Drawable {
    func draw() {
        print("Drawing circle")
    }
}

class Square: Drawable {
    func draw() {
        print("Drawing square")
    }
}

// –í–∞—Ä–∏–∞–Ω—Ç 1: Direct dispatch (generic —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
func render1<T: Drawable>(_ shape: T) {
    shape.draw()  // –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω ‚Üí Direct call
}

render1(Circle())  // –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –∑–Ω–∞–µ—Ç —Ç–∏–ø = Circle
// ‚Üí Direct call –∫ Circle.draw()

// –í–∞—Ä–∏–∞–Ω—Ç 2: Indirect dispatch (—á–µ—Ä–µ–∑ protocol witness table)
func render2(_ shape: Drawable) {
    shape.draw()  // –í—Å–µ–≥–¥–∞ indirect —á–µ—Ä–µ–∑ PWT
}

render2(Circle())  // –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –ù–ï –∑–Ω–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø
// ‚Üí Indirect call —á–µ—Ä–µ–∑ Protocol Witness Table
```

**–ê—Å—Å–µ–º–±–ª–µ—Ä –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ 1 (Direct):**
```asm
; –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è Circle
render1_Circle:
    ; –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤
    bl   Circle.draw
    ret

; 2 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, ~3-5 CPU —Ü–∏–∫–ª–æ–≤
```

**–ê—Å—Å–µ–º–±–ª–µ—Ä –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ 2 (Indirect):**
```asm
render2:
    ; x0 = existential container
    ; –ó–∞–≥—Ä—É–∑–∏—Ç—å witness table
    ldr  x8, [x0, #witness_table_offset]
    
    ; –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞–¥—Ä–µ—Å draw() –∏–∑ witness table
    ldr  x9, [x8, #draw_offset]
    
    ; –ö–æ—Å–≤–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤
    blr  x9
    ret

; 4+ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, ~15-25 CPU —Ü–∏–∫–ª–æ–≤
```

---

**–ü–æ—á–µ–º—É indirect –º–µ–¥–ª–µ–Ω–Ω–µ–µ?**

1. **Memory Latency**
   ```
   L1 Cache hit:      ~1-4 cycles
   L2 Cache hit:      ~10-20 cycles
   L3 Cache hit:      ~40-75 cycles
   RAM:               ~100-300 cycles
   
   Indirect —Ç—Ä–µ–±—É–µ—Ç 2-3 —á—Ç–µ–Ω–∏—è –∏–∑ –ø–∞–º—è—Ç–∏!
   ```

2. **Branch Misprediction**
   ```
   –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ:  0 —à—Ç—Ä–∞—Ñ–∞
   –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ:             ~15-20 cycles (pipeline flush)
   
   Direct call: –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –∑–Ω–∞–µ—Ç –∫—É–¥–∞ –ø—Ä—ã–≥–∞—Ç—å
   Indirect call: –∞–¥—Ä–µ—Å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –ø–∞–º—è—Ç–∏ ‚Üí —Ö—É–∂–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ
   ```

3. **–ù–µ—Ç –∏–Ω–ª–∞–π–Ω–∏–Ω–≥–∞**
   ```swift
   // Direct - –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω–ª–∞–π–Ω–µ–Ω
   func fast() { return 42 }
   let x = fast()  // ‚Üí let x = 42 (0 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π)
   
   // Indirect - –ù–ï –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω–ª–∞–π–Ω–µ–Ω
   func slow() { return 42 }
   let x = slowViaPointer()  // ‚Üí call + return (–º–∏–Ω–∏–º—É–º 2 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)
   ```

4. **CPU Pipeline**
   ```
   Direct: –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –º–æ–∂–µ—Ç –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (prefetch)
   Indirect: –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –Ω–µ –∑–Ω–∞–µ—Ç –∫—É–¥–∞ –ø—Ä—ã–≥–∞—Ç—å ‚Üí pipeline stall
   ```

---

**–ö–æ–≥–¥–∞ –Ω–µ–∏–∑–±–µ–∂–µ–Ω indirect?**

1. **–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã (class)**
   ```swift
   class Base {
       func method() { }  // Indirect —á–µ—Ä–µ–∑ vtable
   }
   ```

2. **Protocol witness tables**
   ```swift
   func process(_ value: Codable) {
       value.encode()  // Indirect —á–µ—Ä–µ–∑ PWT
   }
   ```

3. **Dynamic frameworks —Å –¥–∂–µ–Ω–µ—Ä–∏–∫–∞–º–∏**
   ```swift
   // Framework
   public func generic<T>(_ value: T) { }
   
   // App
   generic(myValue)  // Indirect call –≤ framework
   ```

4. **Objective-C message dispatch**
   ```objc
   [object method];  // Indirect —á–µ—Ä–µ–∑ objc_msgSend
   ```

---

**–ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å indirect?**

1. **Whole Module Optimization**
   ```bash
   SWIFT_COMPILATION_MODE = wholemodule
   # –ü–æ–∑–≤–æ–ª—è–µ—Ç devirtualize –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å
   ```

2. **@inlinable**
   ```swift
   @inlinable
   public func hotPath() {
       // –ö–æ–¥ –∏–Ω–ª–∞–π–Ω–∏—Ç—Å—è ‚Üí direct
   }
   ```

3. **final keyword**
   ```swift
   final class MyClass {
       func method() { }  // –ú–æ–∂–µ—Ç –±—ã—Ç—å direct (–Ω–µ—Ç override)
   }
   ```

4. **Static dispatch –≤–º–µ—Å—Ç–æ protocol**
   ```swift
   // –í–º–µ—Å—Ç–æ
   func process(_ value: Codable) { }
   
   // –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ
   func process<T: Codable>(_ value: T) { }  // –ú–æ–∂–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è
   ```

5. **Struct –≤–º–µ—Å—Ç–æ class**
   ```swift
   struct Value {  // –ù–µ—Ç vtable
       func method() { }  // Direct call
   }
   ```

---

**–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ indirect calls**

```bash
# Instruments ‚Üí Time Profiler
# –ò—â–∏—Ç–µ:
# - objc_msgSend (Objective-C overhead)
# - swift_getTypeByMangledName (–º–Ω–æ–≥–æ = –ø–ª–æ—Ö–æ)
# - *_witness_* symbols (protocol dispatch)

# Command line
instruments -t "Time Profiler" MyApp.app

# –ê–Ω–∞–ª–∏–∑ —Å –ø–æ–º–æ—â—å—é perf (Linux/macOS dtrace)
dtrace -n 'pid$target::*indirect*:entry' -p PID
```

---

##### Module Stability (@frozen)

–î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@frozen`:

```swift
// –í framework
@frozen
public struct Point {
    public var x: Double
    public var y: Double
}

// –ü–æ–∑–≤–æ–ª—è–µ—Ç:
// - –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ø–æ–ª—è–º (–±–µ–∑ metadata)
// - –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö
// - –õ—É—á—à—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```

**–ù–û: @frozen —ç—Ç–æ ABI contract!**
```swift
// –ù–ï–õ–¨–ó–Ø –ø–æ—Ç–æ–º:
// - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è
// - –ò–∑–º–µ–Ω–∏—Ç—å layout
// - –ë–µ–∑ breaking change
```

##### Resilience (–≥–∏–±–∫–æ—Å—Ç—å)

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Swift –∏—Å–ø–æ–ª—å–∑—É–µ—Ç "resilient" –º–æ–¥–µ–ª—å:

```swift
// –í framework (–±–µ–∑ @frozen)
public struct Cache<Value> {
    private var storage: [Value]  // Layout —Å–∫—Ä—ã—Ç
}

// –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ - –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏–∏
cache.get()  // –í—Å–µ–≥–¥–∞ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é (–Ω–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞)

// –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ: –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –±–µ–∑ breaking changes
// –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫: –º–µ–¥–ª–µ–Ω–Ω–µ–µ (indirect access)
```

##### XCFramework –∏ Generics

```bash
# XCFramework (binary distribution)
MyFramework.xcframework/
‚îú‚îÄ‚îÄ ios-arm64/
‚îÇ   ‚îî‚îÄ‚îÄ MyFramework.framework
‚îÇ       ‚îú‚îÄ‚îÄ MyFramework (dylib)
‚îÇ       ‚îî‚îÄ‚îÄ Modules/
‚îÇ           ‚îî‚îÄ‚îÄ MyFramework.swiftmodule/
‚îÇ               ‚îî‚îÄ‚îÄ arm64.swiftmodule  # –¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å!
‚îî‚îÄ‚îÄ ios-arm64-simulator/

# –ü—Ä–æ–±–ª–µ–º—ã:
- –ù–µ—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ ‚Üí –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å
- –¢–æ–ª—å–∫–æ generic –≤–µ—Ä—Å–∏—è
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —á–µ–º static linking
```

---

#### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

##### 1. @inlinable –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

```swift
// –í dynamic framework
public struct Cache<Value> {
    @inlinable  // –ö–æ–¥ –±—É–¥–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω –≤ .swiftmodule
    public func get() -> Value? {
        // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ø–∞–¥—ë—Ç –≤ .swiftmodule
        return storage.last
    }
    
    // –ù–ï @inlinable - –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ dylib
    public func complexOperation() { ... }
}

// –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
cache.get()  
// ‚úÖ –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ –∏–Ω–ª–∞–π–Ω–µ–Ω!
// –ö–æ–¥ –≤–∑—è—Ç –∏–∑ .swiftmodule, –∞ –Ω–µ –∏–∑ dylib
```

**–í–∞–∂–Ω–æ:**
```swift
// @inlinable —ç—Ç–æ ABI contract!
// –ù–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –±–µ–∑ breaking change

// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è:
// - –ü—Ä–æ—Å—Ç—ã—Ö getters/setters
// - –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
// - –ö—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º–µ—Å—Ç

// ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è:
// - –°–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è
// - –ë–æ–ª—å—à–æ–≥–æ –∫–æ–¥–∞ (—Ä–∞–∑–¥—É–µ—Ç —Ä–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
```

##### 2. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–µ-generic –≤–µ—Ä—Å–∏–∏

```swift
// –í framework - generic –≤–µ—Ä—Å–∏—è
public struct Cache<Value> {
    public func get() -> Value? { ... }
}

// + –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è —á–∞—Å—Ç—ã—Ö —Ç–∏–ø–æ–≤
public struct IntCache {
    @inlinable
    public func get() -> Int? { ... }
}

public struct StringCache {
    @inlinable
    public func get() -> String? { ... }
}

// –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
let cache = IntCache()  // ‚úÖ –ë—ã—Å—Ç—Ä–æ
```

##### 3. Type-erased wrappers

```swift
// –î–ª—è —Å–∫—Ä—ã—Ç–∏—è –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤ –≤ API
public class AnyCache {
    private let _get: () -> Any?
    
    public init<C: CacheProtocol>(_ cache: C) {
        _get = { cache.get() }
    }
    
    public func get() -> Any? {
        return _get()
    }
}

// –£–±–∏—Ä–∞–µ—Ç –¥–∂–µ–Ω–µ—Ä–∏–∫–∏ –∏–∑ –ø—É–±–ª–∏—á–Ω–æ–≥–æ API
// –£–ø—Ä–æ—â–∞–µ—Ç binary compatibility
```

---

#### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

##### –î–ª—è Static Libraries (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)

```bash
‚úÖ –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï –∫–æ–≥–¥–∞:
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–∞
- –ú–Ω–æ–≥–æ –¥–∂–µ–Ω–µ—Ä–∏–∫ –∫–æ–¥–∞
- –ù–µ–±–æ–ª—å—à–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- –†–µ–¥–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

# Build Settings
MACH_O_TYPE = staticlib
SWIFT_COMPILATION_MODE = wholemodule  # –î–ª—è WMO –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
```

##### –î–ª—è Dynamic Frameworks (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏)

```bash
‚úÖ –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï –∫–æ–≥–¥–∞:
- –ö–æ–¥ –¥–µ–ª–∏—Ç—Å—è –º–µ–∂–¥—É app –∏ extensions
- –ë–æ–ª—å—à–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (—É–º–µ–Ω—å—à–∞–µ—Ç compile time)
- –ß–∞—Å—Ç—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ù—É–∂–Ω–∞ ABI stability

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ @inlinable –¥–ª—è hot paths
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ @frozen –¥–ª—è stable types
3. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
4. –ü—Ä–æ—Ñ–∏–ª–∏—Ä—É–π—Ç–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ bottlenecks
```

##### Hybrid –ø–æ–¥—Ö–æ–¥ (–ª—É—á—à–µ–µ –∏–∑ –æ–±–æ–∏—Ö –º–∏—Ä–æ–≤)

```swift
// Framework —Å–æ–¥–µ—Ä–∂–∏—Ç:
// 1. Protocols (–≤ public API)
public protocol CacheProtocol {
    associatedtype Value
    func get() -> Value?
}

// 2. Generic —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (internal)
struct GenericCache<Value>: CacheProtocol {
    func get() -> Value? { ... }
}

// 3. –§–∞–±—Ä–∏–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (–º–æ–∂–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å)
public func makeCache<V>() -> some CacheProtocol<Value = V> {
    GenericCache<V>()  // –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
}
```

---

#### Debugging –∏ Analysis

##### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

```bash
# 1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
nm MyApp | grep -i "generic\|specialized"

# 2. –î–∏–∑–∞—Å—Å–µ–º–±–ª–∏—Ä–æ–≤–∞—Ç—å
otool -tV MyApp | less

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä binary
size MyApp

# 4. –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
# Instruments ‚Üí Time Profiler
# –°–º–æ—Ç—Ä–µ—Ç—å –Ω–∞:
# - swift_getTypeByMangledName (–º–Ω–æ–≥–æ = –ø–ª–æ—Ö–æ)
# - swift_allocObject (–º–Ω–æ–≥–æ = –º–Ω–æ–≥–æ boxing)
```

##### Build log analysis

```bash
# –í–∫–ª—é—á–∏—Ç—å verbose output
xcodebuild -verbose OTHER_SWIFT_FLAGS="-driver-print-jobs"

# –ù–∞–π—Ç–∏:
# - Generic specialization logs
# - Inlining decisions
# - Module compilation info
```

---

#### –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è (Senior+)

##### –ü—Ä–æ –¥–∂–µ–Ω–µ—Ä–∏–∫–∏

1. **–û–±—ä—è—Å–Ω–∏—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É generic specialization –∏ dynamic dispatch –¥–ª—è –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤**
   - Specialization: –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø (–±—ã—Å—Ç—Ä–æ)
   - Dynamic: —á–µ—Ä–µ–∑ metadata/witness tables (–≥–∏–±–∫–æ, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ)

2. **–ß—Ç–æ —Ç–∞–∫–æ–µ Protocol Witness Table?**
   - –¢–∞–±–ª–∏—Ü–∞ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ protocol methods
   - –ê–Ω–∞–ª–æ–≥ vtable –≤ C++

3. **–ß—Ç–æ —Ç–∞–∫–æ–µ Value Witness Table?**
   - –¢–∞–±–ª–∏—Ü–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é (copy, destroy, etc.)
   - –î–ª—è –ª—é–±–æ–≥–æ —Ç–∏–ø–∞

4. **–ü–æ—á–µ–º—É –¥–∂–µ–Ω–µ—Ä–∏–∫–∏ –≤ dynamic framework –º–µ–¥–ª–µ–Ω–Ω–µ–µ —á–µ–º –≤ static library?**
   - –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å
   - Indirect dispatch —á–µ—Ä–µ–∑ metadata
   - –ù–µ—Ç inline optimization

5. **–ö–∞–∫ @inlinable –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤ –≤ framework?**
   - –ö–æ–¥ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ .swiftmodule
   - –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
   - –ù–æ —ç—Ç–æ ABI contract

6. **–ß—Ç–æ —Ç–∞–∫–æ–µ Existential Container?**
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π protocol —Ç–∏–ø–∞
   - 3 —Å–ª–æ–≤–∞ –¥–ª—è inline storage + metadata

7. **–ö–∞–∫ Whole Module Optimization –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–∂–µ–Ω–µ—Ä–∏–∫–∏?**
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å across files
   - Cross-module optimization –≤–æ–∑–º–æ–∂–Ω–∞
   - –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

8. **–í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É @frozen –∏ resilient —Ç–∏–ø–∞–º–∏?**
   - @frozen: layout –∏–∑–≤–µ—Å—Ç–µ–Ω (–±—ã—Å—Ç—Ä–æ, –Ω–æ –Ω–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å)
   - Resilient: layout —Å–∫—Ä—ã—Ç (–≥–∏–±–∫–æ, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ)

---

## 3Ô∏è‚É£ Linking (–õ–∏–Ω–∫–æ–≤–∫–∞)

### –ß—Ç–æ —Ç–∞–∫–æ–µ –ª–∏–Ω–∫–æ–≤–∫–∞
–ü—Ä–æ—Ü–µ—Å—Å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (.o) –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ –≤ –µ–¥–∏–Ω—ã–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª.

### –¢–∏–ø—ã –ª–∏–Ω–∫–æ–≤–∫–∏

#### Static Linking (–°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è)
```bash
# Static library (.a)
- –ö–æ–¥ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª
- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ë—ã—Å—Ç—Ä–µ–µ –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ù–µ—Ç runtime –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```

**–ü—Ä–∏–º–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**:
```ruby
# Podfile
pod 'Alamofire', :git => 'https://github.com/Alamofire/Alamofire.git'
# –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏
```

#### Dynamic Linking (–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è)
```bash
# Dynamic framework (.framework)
- –ö–æ–¥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –£–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ –∑–∞–ø—É—Å–∫ (dyld loading)
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ–∂–¥—É app extensions
```

**–ü—Ä–∏–º–µ—Ä**:
```ruby
# Podfile
use_frameworks!  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏
pod 'Alamofire'
```

### Dynamic Linker (dyld)

#### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç dyld –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
1. **Load dylibs** - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
2. **Rebase** - –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –∏–∑-–∑–∞ ASLR
3. **Bind** - –ø—Ä–∏–≤—è–∑–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤
4. **Initialize** - –∑–∞–ø—É—Å–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤ (+load, __attribute__((constructor)))
5. **Main** - –ø–µ—Ä–µ–¥–∞—á–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è main()

#### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è dyld
```bash
# dyld optimization
DYLD_LIBRARY_PATH
DYLD_FRAMEWORK_PATH

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ dyld shared cache
# iOS –∫—ç—à–∏—Ä—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏
```

### Link-Time Optimization (LTO)

```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ LTO
LLVM_LTO = YES  # Whole-module LTO

# –í–∏–¥—ã LTO
- Full LTO: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –º–µ–¥–ª–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞
- Thin LTO: –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
```

### Linker Flags

```bash
# –û–±—â–∏–µ —Ñ–ª–∞–≥–∏
OTHER_LDFLAGS = -ObjC  # –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ Objective-C –∫–ª–∞—Å—Å—ã
OTHER_LDFLAGS = -all_load  # –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å—ë –∏–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
OTHER_LDFLAGS = -force_load <library>  # –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É

# Framework search paths
FRAMEWORK_SEARCH_PATHS = $(inherited) $(PROJECT_DIR)/Frameworks
```

### Dead Code Stripping

```bash
# –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞
DEAD_CODE_STRIPPING = YES

# –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å:
- Static linking
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–π visibility (public/internal)
```

---

## 4Ô∏è‚É£ Asset Compilation (–ö–æ–º–ø–∏–ª—è—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤)

### Asset Catalog

#### –ß—Ç–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
- `Assets.xcassets` ‚Üí `Assets.car` (compiled asset catalog)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è app icons –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
- –ö–æ–º–ø–∏–ª—è—Ü–∏—è color assets

#### –§–æ—Ä–º–∞—Ç .car
```bash
# –ë–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, —Å–æ–¥–µ—Ä–∂–∏—Ç:
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ PNG/JPEG
- @1x, @2x, @3x –≤–∞—Ä–∏–∞–Ω—Ç—ã
- Dark mode variants
- Device-specific assets
```

### Storyboards –∏ XIBs

```bash
# –ö–æ–º–ø–∏–ª—è—Ü–∏—è
Main.storyboard ‚Üí Main.storyboardc (compiled)
LaunchScreen.xib ‚Üí LaunchScreen.nib

# –ü—Ä–æ—Ü–µ—Å—Å:
1. XML parsing
2. Validation
3. Binary serialization
4. Optimization
```

### Localizable Resources

```bash
# –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
Localizable.strings ‚Üí –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –≤ .lproj –ø–∞–ø–∫–∏
- Encoding conversion
- String validation
- Binary plist format
```

### Info.plist Processing

```bash
# –û–±—Ä–∞–±–æ—Ç–∫–∞ Info.plist
- Variable substitution: $(PRODUCT_NAME)
- Merging with entitlements
- Validation
- Binary plist conversion
```

---

## 5Ô∏è‚É£ Code Signing (–ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ –∫–æ–¥–∞)

### –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –ø–æ–¥–ø–∏—Å—å
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–æ–¥ –Ω–µ –±—ã–ª –∏–∑–º–µ–Ω—ë–Ω
- –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
- –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ/App Store

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Code Signing

#### 1. Certificates (–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)
```bash
# –¢–∏–ø—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- Development: –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- Distribution: –¥–ª—è App Store –∏ Ad Hoc
- Enterprise: –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**:
```
Private Key (–Ω–∞ –≤–∞—à–µ–º Mac)
    ‚Üì
CSR (Certificate Signing Request)
    ‚Üì
Apple (–ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç)
    ‚Üì
Certificate (.cer)
```

#### 2. Provisioning Profiles

```bash
# –°–æ–¥–µ—Ä–∂–∏—Ç:
- App ID (com.company.appname)
- Device UUIDs (–¥–ª—è development/ad hoc)
- Entitlements
- Certificate(s)
- Expiration date
```

**–¢–∏–ø—ã –ø—Ä–æ—Ñ–∏–ª–µ–π**:
- **Development**: –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–¥–æ 100 —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
- **Ad Hoc**: –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–Ω–µ App Store (–¥–æ 100 —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
- **App Store**: –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ App Store
- **Enterprise**: –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è

#### 3. Entitlements

```xml
<!-- Example.entitlements -->
<plist version="1.0">
<dict>
    <key>aps-environment</key>
    <string>production</string>
    
    <key>com.apple.developer.applesignin</key>
    <array>
        <string>Default</string>
    </array>
    
    <key>keychain-access-groups</key>
    <array>
        <string>$(AppIdentifierPrefix)com.company.app</string>
    </array>
</dict>
</plist>
```

### –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è

```bash
# –ö–æ–º–∞–Ω–¥–∞ codesign
codesign --force \
         --sign "iPhone Distribution: Company Name" \
         --entitlements MyApp.entitlements \
         --timestamp \
         MyApp.app

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏
codesign --verify --verbose=4 MyApp.app
codesign --display --verbose=4 MyApp.app

# –ü—Ä–æ–≤–µ—Ä–∫–∞ provisioning profile
security cms -D -i embedded.mobileprovision
```

### Code Signature

```bash
# –ß—Ç–æ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è
MyApp.app/
‚îú‚îÄ‚îÄ MyApp (executable)           ‚Üê –ø–æ–¥–ø–∏—Å–∞–Ω
‚îú‚îÄ‚îÄ Frameworks/
‚îÇ   ‚îî‚îÄ‚îÄ MyFramework.framework    ‚Üê –ø–æ–¥–ø–∏—Å–∞–Ω –æ—Ç–¥–µ–ª—å–Ω–æ
‚îú‚îÄ‚îÄ PlugIns/
‚îÇ   ‚îî‚îÄ‚îÄ Widget.appex              ‚Üê –ø–æ–¥–ø–∏—Å–∞–Ω –æ—Ç–¥–µ–ª—å–Ω–æ
‚îú‚îÄ‚îÄ _CodeSignature/
‚îÇ   ‚îî‚îÄ‚îÄ CodeResources            ‚Üê –º–∞–Ω–∏—Ñ–µ—Å—Ç –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
‚îî‚îÄ‚îÄ embedded.mobileprovision     ‚Üê –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–¥–ø–∏—Å–∏
```

### Automatic Code Signing

```bash
# Xcode 8+ automatic signing
CODE_SIGN_STYLE = Automatic
DEVELOPMENT_TEAM = XXXXXXXXXX

# Manual signing
CODE_SIGN_STYLE = Manual
CODE_SIGN_IDENTITY = "iPhone Distribution"
PROVISIONING_PROFILE_SPECIFIER = "AppStore Profile"
```

### –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞**: "No signing certificate found"
```bash
# –†–µ—à–µ–Ω–∏–µ:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Keychain Access
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –µ—Å—Ç—å private key
3. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
```

**–ü—Ä–æ–±–ª–µ–º–∞**: "Code signing entitlements are not compatible"
```bash
# –†–µ—à–µ–Ω–∏–µ:
1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å entitlements —Å provisioning profile
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å App ID capabilities
3. –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
```

---

## 6Ô∏è‚É£ Packaging (–£–ø–∞–∫–æ–≤–∫–∞)

### .app Bundle Structure

```bash
MyApp.app/
‚îú‚îÄ‚îÄ MyApp                        # Executable (Mach-O binary)
‚îú‚îÄ‚îÄ Info.plist                   # App metadata
‚îú‚îÄ‚îÄ embedded.mobileprovision     # Provisioning profile
‚îú‚îÄ‚îÄ PkgInfo                      # Legacy file
‚îú‚îÄ‚îÄ Assets.car                   # Compiled assets
‚îú‚îÄ‚îÄ Base.lproj/                  # Storyboards
‚îÇ   ‚îú‚îÄ‚îÄ Main.storyboardc
‚îÇ   ‚îî‚îÄ‚îÄ LaunchScreen.storyboardc
‚îú‚îÄ‚îÄ en.lproj/                    # Localization
‚îÇ   ‚îî‚îÄ‚îÄ Localizable.strings
‚îú‚îÄ‚îÄ Frameworks/                  # Embedded frameworks
‚îÇ   ‚îî‚îÄ‚îÄ MyFramework.framework
‚îú‚îÄ‚îÄ PlugIns/                     # App extensions
‚îÇ   ‚îî‚îÄ‚îÄ Widget.appex
‚îú‚îÄ‚îÄ _CodeSignature/              # Signature data
‚îÇ   ‚îî‚îÄ‚îÄ CodeResources
‚îî‚îÄ‚îÄ [Other resources]
```

### .ipa Creation

#### –ß—Ç–æ —Ç–∞–∫–æ–µ .ipa
```bash
# .ipa = iOS App Store Package
# –ü–æ —Å—É—Ç–∏ —ç—Ç–æ ZIP-–∞—Ä—Ö–∏–≤ —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
```

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ .ipa

```bash
MyApp.ipa (ZIP archive)
‚îî‚îÄ‚îÄ Payload/
    ‚îî‚îÄ‚îÄ MyApp.app/
        ‚îî‚îÄ‚îÄ [–≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è]
```

#### –°–æ–∑–¥–∞–Ω–∏–µ .ipa –≤—Ä—É—á–Ω—É—é

```bash
# 1. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É
mkdir Payload
cp -r MyApp.app Payload/

# 2. –ó–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å
zip -r MyApp.ipa Payload/

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
unzip -l MyApp.ipa
```

#### –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Xcode

```bash
# Archive –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è
xcodebuild archive \
    -workspace MyApp.xcworkspace \
    -scheme MyApp \
    -configuration Release \
    -archivePath MyApp.xcarchive

# Export .ipa
xcodebuild -exportArchive \
    -archivePath MyApp.xcarchive \
    -exportPath output/ \
    -exportOptionsPlist ExportOptions.plist
```

### Export Options

```xml
<!-- ExportOptions.plist -->
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN">
<plist version="1.0">
<dict>
    <key>method</key>
    <string>app-store</string>  <!-- app-store, ad-hoc, enterprise, development -->
    
    <key>teamID</key>
    <string>XXXXXXXXXX</string>
    
    <key>uploadSymbols</key>
    <true/>
    
    <key>uploadBitcode</key>
    <false/>
    
    <key>compileBitcode</key>
    <false/>
    
    <key>signingStyle</key>
    <string>automatic</string>
    
    <key>provisioningProfiles</key>
    <dict>
        <key>com.company.myapp</key>
        <string>AppStore Profile Name</string>
    </dict>
</dict>
</plist>
```

---

## 7Ô∏è‚É£ Build Configurations

### Debug vs Release

#### Debug Configuration
```bash
# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
SWIFT_OPTIMIZATION_LEVEL = -Onone
GCC_OPTIMIZATION_LEVEL = 0

# Debug symbols
DEBUG_INFORMATION_FORMAT = dwarf
ENABLE_TESTABILITY = YES

# Preprocessor
GCC_PREPROCESSOR_DEFINITIONS = DEBUG=1
SWIFT_ACTIVE_COMPILATION_CONDITIONS = DEBUG

# –î—Ä—É–≥–æ–µ
ENABLE_NS_ASSERTIONS = YES  # NSAssert —Ä–∞–±–æ—Ç–∞–µ—Ç
VALIDATE_PRODUCT = NO
```

#### Release Configuration
```bash
# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
SWIFT_OPTIMIZATION_LEVEL = -O
GCC_OPTIMIZATION_LEVEL = s  # Optimize for size
SWIFT_COMPILATION_MODE = wholemodule

# Debug symbols
DEBUG_INFORMATION_FORMAT = dwarf-with-dsym
ENABLE_TESTABILITY = NO

# Code stripping
DEAD_CODE_STRIPPING = YES
STRIP_INSTALLED_PRODUCT = YES
COPY_PHASE_STRIP = YES

# –î—Ä—É–≥–æ–µ
ENABLE_NS_ASSERTIONS = NO
VALIDATE_PRODUCT = YES
```

### Custom Configurations

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- Staging
- Production
- QA

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
#if STAGING
    let apiURL = "https://staging.api.com"
#elseif PRODUCTION
    let apiURL = "https://api.com"
#endif
```

---

## 8Ô∏è‚É£ Build System

### xcodebuild

#### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–±–æ—Ä–∫–∞
xcodebuild build \
    -workspace MyApp.xcworkspace \
    -scheme MyApp \
    -configuration Debug \
    -sdk iphoneos \
    -destination 'generic/platform=iOS'

# –û—á–∏—Å—Ç–∫–∞
xcodebuild clean \
    -workspace MyApp.xcworkspace \
    -scheme MyApp

# –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ
xcodebuild archive \
    -workspace MyApp.xcworkspace \
    -scheme MyApp \
    -configuration Release \
    -archivePath build/MyApp.xcarchive

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
xcodebuild test \
    -workspace MyApp.xcworkspace \
    -scheme MyApp \
    -destination 'platform=iOS Simulator,name=iPhone 15'

# –°–ø–∏—Å–æ–∫ schemes
xcodebuild -list -workspace MyApp.xcworkspace

# –°–ø–∏—Å–æ–∫ destinations
xcodebuild -showdestinations \
    -workspace MyApp.xcworkspace \
    -scheme MyApp
```

### New Build System (Xcode 10+)

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- –ë—ã—Å—Ç—Ä–µ–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
- –õ—É—á—à–µ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ë–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–Ω–∏–µ
- Improved build system diagnostics

#### Build Settings
```bash
# –í–∫–ª—é—á–∏—Ç—å –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É —Å–±–æ—Ä–∫–∏
# Project Settings > Build System
# "New Build System (Default)"
```

### Derived Data

```bash
# –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
~/Library/Developer/Xcode/DerivedData/

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞
DerivedData/
‚îî‚îÄ‚îÄ MyApp-<hash>/
    ‚îú‚îÄ‚îÄ Build/
    ‚îÇ   ‚îú‚îÄ‚îÄ Intermediates.noindex/  # –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã
    ‚îÇ   ‚îî‚îÄ‚îÄ Products/               # –ò—Ç–æ–≥–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
    ‚îú‚îÄ‚îÄ Index/                      # Index –¥–ª—è code completion
    ‚îú‚îÄ‚îÄ Logs/                       # Build logs
    ‚îî‚îÄ‚îÄ ModuleCache.noindex/        # –ö—ç—à –º–æ–¥—É–ª–µ–π

# –û—á–∏—Å—Ç–∫–∞
rm -rf ~/Library/Developer/Xcode/DerivedData/
# –∏–ª–∏ —á–µ—Ä–µ–∑ Xcode: Product > Clean Build Folder (Cmd+Shift+K)
```

---

## 9Ô∏è‚É£ Optimization Techniques

### Build Time Optimization

#### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Precompiled Headers (PCH)
```objc
// ProjectName-Prefix.pch
#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
#endif
```

#### 2. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
```bash
# Build settings
PARALLEL_BUILD_ENABLED = YES

# Command line
xcodebuild -jobs 8  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 8 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á
```

#### 3. –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å
```swift
// –†–∞–∑–±–∏–≤–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ –º–æ–¥—É–ª–∏/—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏
// –ë—ã—Å—Ç—Ä–µ–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
MyApp
‚îú‚îÄ‚îÄ CoreModule.framework
‚îú‚îÄ‚îÄ UIModule.framework
‚îî‚îÄ‚îÄ NetworkModule.framework
```

#### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Swift Compilation

```bash
# Debug: Incremental, –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –æ—Ç–¥–µ–ª—å–Ω–æ
SWIFT_COMPILATION_MODE = incremental

# –û—Ç–∫–ª—é—á–∏—Ç—å WHOLE_OPTIMIZATION –≤ Debug
SWIFT_WHOLE_MODULE_OPTIMIZATION = NO

# –ò–∑–º–µ—Ä—è—Ç—å –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
OTHER_SWIFT_FLAGS = -Xfrontend -warn-long-function-bodies=100
OTHER_SWIFT_FLAGS = -Xfrontend -warn-long-expression-type-checking=100
```

#### 5. Dependency Management
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ binary frameworks –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
# –í–º–µ—Å—Ç–æ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤
pod 'Firebase/Analytics', :binary => true
```

### Runtime Optimization

#### 1. App Launch Time
```bash
# –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ dyld loading
- –£–º–µ–Ω—å—à–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ static linking –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- –û—Ç–ª–æ–∂–∏—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Ç—è–∂—ë–ª—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
```

#### 2. Binary Size
```bash
# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞
DEPLOYMENT_POSTPROCESSING = YES
STRIP_INSTALLED_PRODUCT = YES
STRIP_SWIFT_SYMBOLS = YES

# App Thinning
ENABLE_BITCODE = NO  # Deprecated –¥–ª—è iOS
ASSETCATALOG_COMPILER_OPTIMIZATION = space

# –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–∏–ø–∞ FengNiao
```

---

## üîü Advanced Topics

### Bitcode (Deprecated)

```bash
# –ß—Ç–æ —Ç–∞–∫–æ–µ Bitcode
- –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (LLVM IR)
- –ü–æ–∑–≤–æ–ª—è–µ—Ç Apple –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤
- Deprecated —Å Xcode 14

ENABLE_BITCODE = NO  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–µ–ø–µ—Ä—å NO
```

### dSYM Files

```bash
# Debug Symbol Files
- –ù–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è —Å–∏–º–≤–æ–ª–∏–∫–∞—Ü–∏–∏ crash reports
- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ Release —Å–±–æ—Ä–∫–µ

# Build Settings
DEBUG_INFORMATION_FORMAT = dwarf-with-dsym

# –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ
build/MyApp.app.dSYM

# Upload –≤ Crashlytics/Firebase
./upload-symbols -gsp GoogleService-Info.plist -p ios build/MyApp.app.dSYM
```

### Build Scripts (Run Script Phases)

```bash
# –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

# 1. SwiftLint
if which swiftlint >/dev/null; then
  swiftlint
else
  echo "warning: SwiftLint not installed"
fi

# 2. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ Firebase config
cp "${SRCROOT}/Config/${CONFIGURATION}/GoogleService-Info.plist" "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.app/"

# 3. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "${INFOPLIST_FILE}")
buildNumber=$(($buildNumber + 1))
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "${INFOPLIST_FILE}"
```

### Build Phases Order

```bash
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ Build Phases:

1. Target Dependencies
2. [Run Script] - –ø–µ—Ä–µ–¥ –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞)
3. Compile Sources
4. [Run Script] - –ø–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (SwiftLint)
5. Link Binary With Libraries
6. Copy Bundle Resources
7. [Run Script] - –ø–æ—Å–ª–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤)
8. Embed Frameworks
9. [Run Script] - —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (Firebase, dSYM upload)
```

### Conditional Compilation

```swift
// –ü–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
#if os(iOS)
    import UIKit
#elseif os(macOS)
    import AppKit
#endif

// –ü–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
#if arch(arm64)
    // ARM64 specific
#elseif arch(x86_64)
    // Simulator
#endif

// –ü–æ Swift –≤–µ—Ä—Å–∏–∏
#if swift(>=5.5)
    // Async/await available
#endif

// –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ñ–ª–∞–≥–∏
#if DEBUG
    print("Debug build")
#endif
```

---

## üìä Build Analysis

### Build Time Analysis

```bash
# Xcode Build Timeline
# Product > Perform Action > Build With Timing Summary

# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –í—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å —Å–±–æ—Ä–∫–∏
- Bottlenecks

# Command line
xcodebuild -workspace MyApp.xcworkspace \
           -scheme MyApp \
           -showBuildTimingSummary
```

### Compilation Time per File

```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ Other Swift Flags
-Xfrontend -debug-time-function-bodies
-Xfrontend -debug-time-compilation

# –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
grep "time to" build_log.txt | sort -n
```

---

## üêõ Common Issues & Troubleshooting

### 1. Module Not Found

```bash
–û—à–∏–±–∫–∞: "No such module 'ModuleName'"

–†–µ—à–µ–Ω–∏—è:
1. Clean Build Folder (Cmd+Shift+K)
2. –£–¥–∞–ª–∏—Ç—å DerivedData
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Framework Search Paths
4. Rebuild dependencies (pod install)
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å target membership —Ñ–∞–π–ª–∞
```

### 2. Signing Errors

```bash
–û—à–∏–±–∫–∞: "Code signing is required"

–†–µ—à–µ–Ω–∏—è:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ Keychain
2. –û–±–Ω–æ–≤–∏—Ç—å provisioning profiles
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Bundle ID match
4. –í–∫–ª—é—á–∏—Ç—å Automatic Signing
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å entitlements
```

### 3. Linker Errors

```bash
–û—à–∏–±–∫–∞: "Undefined symbols for architecture"

–†–µ—à–µ–Ω–∏—è:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å target membership
2. –î–æ–±–∞–≤–∏—Ç—å -ObjC –≤ OTHER_LDFLAGS
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∏–º–ø–æ—Ä—Ç–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å architecture –≤ Build Settings
```

### 4. Asset Catalog Errors

```bash
–û—à–∏–±–∫–∞: "Failed to find or create execution context"

–†–µ—à–µ–Ω–∏—è:
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Xcode
2. –£–¥–∞–ª–∏—Ç—å DerivedData
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É Assets.xcassets
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```

### 5. Provisioning Profile Issues

```bash
–û—à–∏–±–∫–∞: "Provisioning profile doesn't support capability"

–†–µ—à–µ–Ω–∏—è:
1. –û–±–Ω–æ–≤–∏—Ç—å capabilities –≤ App ID
2. –°–∫–∞—á–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å
3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å entitlements
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å expiration date
```

---

## üîß Best Practices

### 1. Build Configuration Management

```bash
‚úÖ DO:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
- –•—Ä–∞–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥–∏ –≤ .xcconfig —Ñ–∞–π–ª–∞—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ environment variables

‚ùå DON'T:
- –•–∞—Ä–¥–∫–æ–¥–∏—Ç—å API keys –≤ –∫–æ–¥–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –≤—Å–µ–≥–æ
```

### 2. Dependency Management

```bash
‚úÖ DO:
- –ó–∞–∫—Ä–µ–ø–ª—è–π—Ç–µ –≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Lockfile (Podfile.lock, Package.resolved)
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

‚ùå DON'T:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 'latest' –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—è
- –ö–æ–º–º–∏—Ç–∏—Ç—å Pods/ –≤ git (—Å–ø–æ—Ä–Ω–æ)
```

### 3. Build Scripts

```bash
‚úÖ DO:
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- –î–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º–∏
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ exit codes

‚ùå DON'T:
- –î–µ–ª–∞—Ç—å —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É –≤ Run Script phases
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤
```

### 4. Code Signing

```bash
‚úÖ DO:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Automatic Signing –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –•—Ä–∞–Ω–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ Keychain
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Fastlane Match –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

‚ùå DON'T:
- –®–∞—Ä–∏—Ç—å private keys
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å wildcard profiles –≤ production
```

### 5. Build Optimization

```bash
‚úÖ DO:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- –ò–∑–º–µ—Ä—è–π—Ç–µ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

‚ùå DON'T:
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å warnings
- –î–µ—Ä–∂–∞—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

---

## üìù –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è Senior

### –ü—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏

1. **–û–ø–∏—à–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ iOS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –¥–æ .ipa —Ñ–∞–π–ª–∞**
   - Preprocessing, Compilation, Linking, Asset Compilation, Code Signing, Packaging

2. **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ Swift –∫–æ–¥–∞?**
   - Parsing ‚Üí AST ‚Üí SIL ‚Üí LLVM IR ‚Üí Machine Code

3. **–í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Whole Module Optimization –∏ Incremental Compilation?**
   - WMO: –≤–µ—Å—å –º–æ–¥—É–ª—å —Å—Ä–∞–∑—É, –±–æ–ª—å—à–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π, –º–µ–¥–ª–µ–Ω–Ω–µ–µ
   - Incremental: –ø–æ —Ñ–∞–π–ª–∞–º, –±—ã—Å—Ç—Ä–µ–µ –¥–ª—è debug

4. **–ß—Ç–æ —Ç–∞–∫–æ–µ Link-Time Optimization?**
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ —Å—Ç–∞–¥–∏–∏ –ª–∏–Ω–∫–æ–≤–∫–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
   - Full vs Thin LTO

### –õ–∏–Ω–∫–æ–≤–∫–∞

5. **–í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É static –∏ dynamic linking?**
   - Static: –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ binary, –±–æ–ª—å—à–µ —Ä–∞–∑–º–µ—Ä, –±—ã—Å—Ç—Ä–µ–µ –∑–∞–ø—É—Å–∫
   - Dynamic: –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è runtime, –º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä, –º–µ–¥–ª–µ–Ω–Ω–µ–µ –∑–∞–ø—É—Å–∫

6. **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç dynamic linker (dyld)?**
   - Load ‚Üí Rebase ‚Üí Bind ‚Üí Initialize ‚Üí Main

7. **–ß—Ç–æ —Ç–∞–∫–æ–µ dead code stripping?**
   - –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–∏ –ª–∏–Ω–∫–æ–≤–∫–µ

### Code Signing

8. **–û–±—ä—è—Å–Ω–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å code signing –≤ iOS**
   - Certificate + Provisioning Profile + Entitlements
   - Private/Public key cryptography

9. **–ö–∞–∫–∏–µ —Ç–∏–ø—ã provisioning profiles —Å—É—â–µ—Å—Ç–≤—É—é—Ç?**
   - Development, Ad Hoc, App Store, Enterprise

10. **–ß—Ç–æ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ provisioning profile?**
    - App ID, Device IDs, Entitlements, Certificate, Expiration

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

11. **–ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏?**
    - –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å, –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è, precompiled headers
    - –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
    - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

12. **–ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?**
    - Strip symbols, App Thinning, Asset compression
    - Dead code stripping, —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

13. **–ö–∞–∫ —É–º–µ–Ω—å—à–∏—Ç—å –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?**
    - –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
    - Static linking, –æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

### Advanced

14. **–ß—Ç–æ —Ç–∞–∫–æ–µ dSYM —Ñ–∞–π–ª—ã –∏ –∑–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã?**
    - Debug symbols –¥–ª—è —Å–∏–º–≤–æ–ª–∏–∫–∞—Ü–∏–∏ crash reports

15. **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Build System –≤ Xcode?**
    - Dependency graph, parallel tasks, incremental builds

16. **–û–±—ä—è—Å–Ω–∏—Ç–µ —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É Debug –∏ Release –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏**
    - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, debug symbols, assertions, stripping

17. **–ß—Ç–æ —Ç–∞–∫–æ–µ .xcarchive –∏ —á—Ç–æ –≤ –Ω—ë–º —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è?**
    - Bundle —Å–æ–¥–µ—Ä–∂–∏—Ç .app, dSYMs, Info.plist, metadata

18. **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç App Thinning?**
    - Slicing (device-specific), Bitcode (deprecated), On-demand resources

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ–º—ã

- [[git]] - Version Control
- [[CI & CD]] - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
- [[app-store-connect]] - –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ
- [[certificates-provisioning]] - Code Signing

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Xcode Build System Guide](https://developer.apple.com/documentation/xcode)
- [Code Signing Guide](https://developer.apple.com/support/code-signing/)
- [App Distribution Guide](https://developer.apple.com/distribute/)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- `xcodebuild` - Command-line build tool
- `codesign` - Code signing tool
- `xcrun` - Run Xcode tools
- `xcode-select` - Manage Xcode versions
- `altool` - Upload to App Store
- `security` - Keychain management

### Build Time Analysis
- [BuildTimeAnalyzer](https://github.com/RobertGummesson/BuildTimeAnalyzer-for-Xcode)
- Xcode Build Timeline (Product ‚Üí Perform Action)

### Fastlane
```ruby
# –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
lane :release do
  increment_build_number
  build_app(scheme: "MyApp")
  upload_to_app_store
end
```

---

## üí° Tips & Tricks

### –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–±–æ—Ä–∫–∏

```bash
# 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å .xcconfig —Ñ–∞–π–ª—ã
SWIFT_COMPILATION_MODE = singlefile  # –¥–ª—è Debug
SWIFT_COMPILATION_MODE = wholemodule # –¥–ª—è Release

# 2. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ CocoaPods
$ pod install --deployment

# 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å cached builds –≤ CI
# –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å DerivedData, Carthage/Build, .build/

# 4. –ò–∑–º–µ—Ä—è—Ç—å –≤—Ä–µ–º—è
defaults write com.apple.dt.Xcode ShowBuildOperationDuration -bool YES
```

### Debugging Build Issues

```bash
# Verbose xcodebuild output
xcodebuild -verbose

# Show environment
xcodebuild -showBuildSettings

# Build log location
~/Library/Developer/Xcode/DerivedData/*/Logs/Build/

# Analyze build log
xcbeautify  # Pretty build output
```

### Scripting

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π build number
agvtool next-version -all

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–µ—Ä—Å–∏—è –∏–∑ git
git describe --tags --always
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è Senior

- [ ] –ü–æ–Ω–∏–º–∞—é –≤—Å–µ —Å—Ç–∞–¥–∏–∏ —Å–±–æ—Ä–∫–∏ –æ—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ –¥–æ .ipa
- [ ] –ú–æ–≥—É –æ–±—ä—è—Å–Ω–∏—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É static –∏ dynamic linking
- [ ] –ó–Ω–∞—é –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç code signing –∏ provisioning
- [ ] –ú–æ–≥—É –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å build time –∏ app size
- [ ] –ü–æ–Ω–∏–º–∞—é –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç dyld –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- [ ] –ó–Ω–∞—é –∫–∞–∫ –¥–µ–±–∞–∂–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–±–æ—Ä–∫–æ–π
- [ ] –ú–æ–≥—É –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD pipeline
- [ ] –ü–æ–Ω–∏–º–∞—é Build Settings –∏ –∏—Ö –≤–ª–∏—è–Ω–∏–µ
- [ ] –ó–Ω–∞—é best practices –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- [ ] –ú–æ–≥—É –æ–±—ä—è—Å–Ω–∏—Ç—å New Build System –≤ Xcode

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-10-05  
**–°—Ç–∞—Ç—É—Å:** Complete ‚úÖ  
**–£—Ä–æ–≤–µ–Ω—å:** Senior iOS Developer

