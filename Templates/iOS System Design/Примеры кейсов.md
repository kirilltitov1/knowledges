
# –°—É–ø–µ—Ä–∞–ø–ø: ‚úÖ/‚ùå —à–ø–∞—Ä–≥–∞–ª–∫–∞ –º–æ–¥—É–ª–µ–π –∏ —Å–≤—è–∑–µ–π

**–õ–µ–≥–µ–Ω–¥–∞**

- ‚úÖ ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ
    
- ‚ùå ‚Äî –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
    
- üß© ‚Äî –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã/DTO (Domain/Ports)
    
- üß≠ ‚Äî —Ä–æ—É—Ç–µ—Ä/–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä (App-shell)
    
- üß± ‚Äî —è–¥—Ä–æ/–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Core)
    
- üì¶ ‚Äî —Ñ–∏—á–∞ (Feature)
    
- üõ∞Ô∏è ‚Äî —Å–æ–±—ã—Ç–∏—è (EventBus)
    

---

## –ë–∞–∑–æ–≤–∞—è —Å–µ—Ç–∫–∞ (–æ—Ä–∏–µ–Ω—Ç–∏—Ä)

```mermaid
%%{init: {
  "theme": "base",
  "themeVariables": {
    "background":"#0b1220","primaryColor":"#0f2a4d","primaryTextColor":"#E8F1FF",
    "lineColor":"#5ED3F3","arrowheadColor":"#5ED3F3","clusterBkg":"#0b192f","edgeLabelBackground":"#0b192f","fontSize":"16px"
  },
  "themeCSS": ".edgePath path{stroke-width:2.5px} .marker path{fill:#5ED3F3} .cluster rect{fill:#0b192f;stroke:#5ED3F3} .node rect,.node circle,.node ellipse,.node polygon{stroke-width:1.4px}"
}}%%
flowchart LR
  classDef hub fill:#0b192f,stroke:#5ED3F3,color:#E8F1FF;
  classDef core fill:#0f2a4d,stroke:#5ED3F3,color:#E8F1FF;
  classDef feature fill:#0f2a4d,stroke:#5ED3F3,color:#E8F1FF;
  subgraph G["–ë–∞–∑–æ–≤–∞—è —Å–µ—Ç–∫–∞ ‚Äî –æ—Ä–∏–µ–Ω—Ç–∏—Ä"]
  subgraph "Domain / Ports"
    P["üß© Ports & DTO"]:::hub
  end
  subgraph "Core"
    C["üß± Core (DesignSystem, Networking, Analytics)"]:::core
  end
  subgraph "Features"
    A["üì¶ FeatureA"]:::feature
    B["üì¶ FeatureB"]:::feature
    S["üì¶ Search"]:::feature
    K["üì¶ Cart"]:::feature
    R["üì¶ Profile"]:::feature
  end
  subgraph "App / Shell"
    APP["üß≠ AppRouter + DI"]:::hub
  end

  A --> P
  B --> P
  S --> P
  K --> P
  R --> P
  A --> C
  B --> C
  S --> C
  K --> C
  R --> C
  APP --> A
  APP --> B
  APP --> S
  APP --> K
  APP --> R
  APP --> P
  end
  style G fill:#0b192f,stroke:#5ED3F3,color:#E8F1FF;
```

---

## 1) ¬´FeatureA —Ç—Ä–µ–±—É–µ—Ç —á—Ç–æ-—Ç–æ –∏–∑ FeatureB¬ª

```mermaid
%%{init: {
  "theme":"base","themeVariables":{"background":"#0b1220","lineColor":"#5ED3F3","arrowheadColor":"#5ED3F3","primaryTextColor":"#E8F1FF","clusterBkg":"#0b192f"},
  "themeCSS":".edgePath path{stroke-width:2.5px}"
}}%%
flowchart LR
  classDef good fill:#113d2c,stroke:#3ddc97,color:#dfffea;
  classDef bad  fill:#3d1111,stroke:#ff6b6b,color:#ffecec;
  classDef hub  fill:#0b192f,stroke:#5ED3F3,color:#E8F1FF;

  subgraph "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ (DIP —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç—ã)"
    GA["üì¶ FeatureA"]:::good --> P["üß© InterfaceB + DTO (Domain)"]:::hub
    GB["üì¶ FeatureB ‚Äî \"Adapter\""]:::good --> P
    APP1["üß≠ App"]:::hub --> GA & GB & P
  end

  subgraph "‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å/—Ü–∏–∫–ª)"
    BA["üì¶ FeatureA"]:::bad --> BB["üì¶ FeatureB"]:::bad
    BB --> BA
  end
```

---

## 2) –ù–∞–≤–∏–≥–∞—Ü–∏—è Cart ‚Üí Profile

```mermaid
%%{init: {
  "theme":"base","themeVariables":{"background":"#0b1220","lineColor":"#5ED3F3","arrowheadColor":"#5ED3F3","primaryTextColor":"#E8F1FF","clusterBkg":"#0b192f"},
  "themeCSS":".edgePath path{stroke-width:2.5px}"
}}%%
flowchart LR
  classDef good fill:#113d2c,stroke:#3ddc97,color:#dfffea;
  classDef bad  fill:#3d1111,stroke:#ff6b6b,color:#ffecec;
  classDef hub  fill:#0b192f,stroke:#5ED3F3,color:#E8F1FF;

  subgraph "‚úÖ –ß–µ—Ä–µ–∑ App-router"
    GK["üì¶ Cart"]:::good --> ROUTE["üß© Route.profile(UserID)"]:::hub
    APP2["üß≠ AppRouter"]:::hub --> GR["üì¶ Profile (factory)"]:::good
    APP2 --> GK
  end

  subgraph "‚ùå –ü—Ä—è–º–æ–π –∏–º–ø–æ—Ä—Ç/—Å–æ–∑–¥–∞–Ω–∏–µ VC"
    BK["üì¶ Cart"]:::bad --> BR["üì¶ Profile"]:::bad
  end
```

---

## 3) Search ¬´—Ö–æ—á–µ—Ç –∑–Ω–∞—Ç—å, —á—Ç–æ –≤ –∫–æ—Ä–∑–∏–Ω–µ¬ª

```mermaid
%%{init: {
  "theme":"base","themeVariables":{"background":"#0b1220","lineColor":"#5ED3F3","arrowheadColor":"#5ED3F3","primaryTextColor":"#E8F1FF","clusterBkg":"#0b192f"},
  "themeCSS":".edgePath path{stroke-width:2.5px}"
}}%%
flowchart LR
  classDef good fill:#113d2c,stroke:#3ddc97,color:#dfffea;
  classDef bad  fill:#3d1111,stroke:#ff6b6b,color:#ffecec;
  classDef hub  fill:#0b192f,stroke:#5ED3F3,color:#E8F1FF;

  subgraph "‚úÖ Read-–ø–æ—Ä—Ç + —Å–æ–±—ã—Ç–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"
    GS["üì¶ Search"]:::good --> PR["üß© CartReader (Domain)"]:::hub
    GK3["üì¶ Cart ‚Äî Adapter"]:::good --> PR
    EV["üõ∞Ô∏è CartUpdated(userID)"]:::hub
    GK3 --> EV
    GS --> EV
    APP3["üß≠ App"]:::hub --> GS & GK3 & PR
  end

  subgraph "‚ùå Search —á–∏—Ç–∞–µ—Ç CartStore –Ω–∞–ø—Ä—è–º—É—é"
    BS["üì¶ Search"]:::bad --> BK3["üì¶ CartStore"]:::bad
  end
```

---

## 4) DesignSystem –∫–∞–∫ ¬´–ª–∏—Å—Ç–æ–≤–æ–π¬ª –º–æ–¥—É–ª—å (hub —Ç–æ–ª—å–∫–æ –≤–Ω–∏–∑)

```mermaid
%%{init: {
  "theme":"base","themeVariables":{"background":"#0b1220","lineColor":"#5ED3F3","arrowheadColor":"#5ED3F3","primaryTextColor":"#E8F1FF","clusterBkg":"#0b192f"},
  "themeCSS":".edgePath path{stroke-width:2.5px}"
}}%%
flowchart LR
  classDef good fill:#113d2c,stroke:#3ddc97,color:#dfffea;
  classDef bad  fill:#3d1111,stroke:#ff6b6b,color:#ffecec;

  subgraph "‚úÖ DS –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ç —Ñ–∏—á–∏"
    GDS["üß± DesignSystem"]:::good
    GFA["üì¶ FeatureA"]:::good --> GDS
    GFB["üì¶ FeatureB"]:::good --> GDS
  end

  subgraph "‚ùå DS —Ç—è–Ω–µ—Ç —Ñ–∏—á–∏ (—Ü–∏–∫–ª)"
    BDS["üß± DesignSystem"]:::bad --> BFA["üì¶ FeatureA"]:::bad
    BFA --> BDS
  end
```

---

## 5) –°–æ–±—ã—Ç–∏—è ‚Äî —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è —à–∏–Ω–∞

```mermaid
%%{init: {
  "theme":"base","themeVariables":{"background":"#0b1220","lineColor":"#5ED3F3","arrowheadColor":"#5ED3F3","primaryTextColor":"#E8F1FF","clusterBkg":"#0b192f"},
  "themeCSS":".edgePath path{stroke-width:2.5px}"
}}%%
flowchart LR
  classDef good fill:#113d2c,stroke:#3ddc97,color:#dfffea;
  classDef bad  fill:#3d1111,stroke:#ff6b6b,color:#ffecec;

  subgraph "‚úÖ Typed EventBus"
    EB["üõ∞Ô∏è EventBus<T> (Core)"]:::good
    KC["üì¶ Cart"]:::good --> EB
    SS["üì¶ Search"]:::good --> EB
  end

  subgraph "‚ùå –°—Ç—Ä–æ–∫–æ–≤—ã–µ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏"
    KC2["üì¶ Cart"]:::bad --> N["‚ùå cart_updated (String)"]:::bad
    SS2["üì¶ Search"]:::bad --> N
  end
```

---

## 6) –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ vs DI/Stores

```mermaid
%%{init: {
  "theme":"base","themeVariables":{"background":"#0b1220","lineColor":"#5ED3F3","arrowheadColor":"#5ED3F3","primaryTextColor":"#E8F1FF","clusterBkg":"#0b192f"},
  "themeCSS":".edgePath path{stroke-width:2.5px}"
}}%%
flowchart LR
  classDef good fill:#113d2c,stroke:#3ddc97,color:#dfffea;
  classDef bad  fill:#3d1111,stroke:#ff6b6b,color:#ffecec;
  classDef hub  fill:#0b192f,stroke:#5ED3F3,color:#E8F1FF;

  subgraph "‚úÖ DI + –¥–æ–º–µ–Ω–Ω—ã–µ store/–∞–∫—Ç–æ—Ä—ã"
    APP6["üß≠ App DI"]:::hub --> AUTH["üß± AuthStore (actor)"]:::good
    APP6 --> CST["üß± CartStore (actor)"]:::good
    FA6["üì¶ FeatureA"]:::good --> AUTH
    FK6["üì¶ Cart"]:::good --> CST
  end

  subgraph "‚ùå –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–∏–Ω–≥–ª—Ç–æ–Ω—ã"
    FA6B["üì¶ FeatureA"]:::bad --> GS["‚ùå GlobalSingleton.shared"]:::bad
    FK6B["üì¶ Cart"]:::bad --> GS
  end
```

---

## 7) –¢–µ—Å—Ç—ã —Ñ–∏—á–∏ –±–µ–∑ —Å–æ—Å–µ–¥–µ–π

```mermaid
%%{init: {
  "theme":"base","themeVariables":{"background":"#0b1220","lineColor":"#5ED3F3","arrowheadColor":"#5ED3F3","primaryTextColor":"#E8F1FF","clusterBkg":"#0b192f"},
  "themeCSS":".edgePath path{stroke-width:2.5px}"
}}%%
flowchart LR
  classDef good fill:#113d2c,stroke:#3ddc97,color:#dfffea;
  classDef bad  fill:#3d1111,stroke:#ff6b6b,color:#ffecec;

  subgraph "‚úÖ –°—Ç–∞–±—ã –ø–æ –ø–æ—Ä—Ç–∞–º"
    TESTA["üß™ FeatureATests"]:::good --> STUB["üß© Stub(ProfileReader)"]:::good
    STUB --> GA7["üì¶ FeatureA"]:::good
  end

  subgraph "‚ùå –¢—è–Ω—É—Ç—å —Å–æ—Å–µ–¥–Ω—é—é —Ñ–∏—á—É"
    TESTA2["üß™ FeatureATests"]:::bad --> GB7["üì¶ FeatureB (real)"]:::bad
  end
```

---

## 8) SharedModels ‚Äî –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —Å–ª–æ–π

```mermaid
%%{init: {
  "theme":"base","themeVariables":{"background":"#0b1220","lineColor":"#5ED3F3","arrowheadColor":"#5ED3F3","primaryTextColor":"#E8F1FF","clusterBkg":"#0b192f"},
  "themeCSS":".edgePath path{stroke-width:2.5px}"
}}%%
flowchart LR
  classDef good fill:#113d2c,stroke:#3ddc97,color:#dfffea;
  classDef bad  fill:#3d1111,stroke:#ff6b6b,color:#ffecec;

  subgraph "‚úÖ –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã + –º–∞–ø–ø–∏–Ω–≥–∏"
    SM["üß± SharedModels (ID, Money, DateRange)"]:::good
    D["üß© Domain Entities"]:::good --> SM
    DATA["üß± Data DTO"]:::good --> D
    UI["üì¶ Feature VM"]:::good --> D
  end

  subgraph "‚ùå God-module ¬´–≤—Å—ë –ø–æ–¥—Ä—è–¥¬ª"
    GOD["‚ùå SharedAllThings (UI + Network + Models)"]:::bad
    A8["üì¶ FeatureA"]:::bad --> GOD
    B8["üì¶ FeatureB"]:::bad --> GOD
  end
```

---

## 9) –°–µ—Ç—å/–ë–∞–∑–∞ ‚Äî —á–µ—Ä–µ–∑ UseCase (–Ω–µ –∏–∑ UI)

```mermaid
%%{init: {
  "theme":"base","themeVariables":{"background":"#0b1220","lineColor":"#5ED3F3","arrowheadColor":"#5ED3F3","primaryTextColor":"#E8F1FF","clusterBkg":"#0b192f"},
  "themeCSS":".edgePath path{stroke-width:2.5px}"
}}%%
flowchart LR
  classDef good fill:#113d2c,stroke:#3ddc97,color:#dfffea;
  classDef bad  fill:#3d1111,stroke:#ff6b6b,color:#ffecec;

  subgraph "‚úÖ UseCase/Repo"
    VM9["üì¶ Feature VM"]:::good --> UC["üß© UseCase (Domain)"]:::good
    UC --> REPO["üß± Repository (Data)"]:::good
    REPO --> NET["üß± Network"]:::good
    REPO --> DB["üß± Database"]:::good
  end

  subgraph "‚ùå UI –¥–µ—Ä–≥–∞–µ—Ç API/SQL"
    VM9B["üì¶ Feature VM"]:::bad --> N9["‚ùå URLSession / SQL"]:::bad
  end
```

---

## 10) Widget/Extension ‚Äî –º–µ–∂–ø—Ä–æ—Ü–µ—Å—Å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```mermaid
%%{init: {
  "theme":"base","themeVariables":{"background":"#0b1220","lineColor":"#5ED3F3","arrowheadColor":"#5ED3F3","primaryTextColor":"#E8F1FF","clusterBkg":"#0b192f"},
  "themeCSS":".edgePath path{stroke-width:2.5px}"
}}%%
flowchart LR
  classDef good fill:#113d2c,stroke:#3ddc97,color:#dfffea;
  classDef bad  fill:#3d1111,stroke:#ff6b6b,color:#ffecec;

  subgraph "‚úÖ App Group + –æ–±—â–∏–π –±–µ–∑ UIKit —Å–ª–æ–π"
    APPX["üß≠ App"]:::good --> AG["üß± App Group Store"]:::good
    WID["üì¶ Widget"]:::good --> AG
    APPX --> SH["üß± SharedLogic (no UIKit)"]:::good
    WID --> SH
  end

  subgraph "‚ùå –í–∏–¥–∂–µ—Ç —Ç—è–Ω–µ—Ç App-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏"
    WIDB["üì¶ Widget"]:::bad --> APPI["‚ùå App-only APIs/UIKit"]:::bad
  end
```

---

## 11) –ö—ç—à-—Ü–µ–ø–æ—á–∫–∞ (Chain of Responsibility) –≤ data-—Å–ª–æ–µ

```mermaid
%%{init: {
  "theme":"base","themeVariables":{"background":"#0b1220","lineColor":"#5ED3F3","arrowheadColor":"#5ED3F3","primaryTextColor":"#E8F1FF","clusterBkg":"#0b192f"},
  "themeCSS":".edgePath path{stroke-width:2.5px}"
}}%%
flowchart LR
  classDef good fill:#113d2c,stroke:#3ddc97,color:#dfffea;
  classDef bad  fill:#3d1111,stroke:#ff6b6b,color:#ffecec;

  subgraph "‚úÖ –ü–∏—Ä–∞–º–∏–¥–∞ –∫—ç—à–µ–π + —è–≤–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞"
    VM11["üì¶ Feature VM"]:::good --> UC11["üß© UseCase"]:::good
    UC11 --> CH["üß± CacheChain (memory‚Üídisk‚Üínetwork)"]:::good
    CH --> MEM["üß± MemoryCache (ttl)"]:::good
    CH --> DISK["üß± DiskCache (ttl, size)"]:::good
    CH --> NET11["üß± Network"]:::good
  end

  subgraph "‚ùå –ö—ç—à/—Å–µ—Ç—å –ø—Ä—è–º–æ –≤ UI"
    VM11B["üì¶ Feature VM"]:::bad --> MC["‚ùå RandomCache.inMemory"]:::bad
    VM11B --> N11["‚ùå Network (–±–µ–∑ TTL/–¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏)"]:::bad
  end
```

---

### (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç –¥–ª—è –≤—Å–µ—Ö –¥–∏–∞–≥—Ä–∞–º–º —á–µ—Ä–µ–∑ CSS-—Å–Ω–∏–ø–ø–µ—Ç

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã¬†**–≤—Å–µ**¬†Mermaid-–¥–∏–∞–≥—Ä–∞–º–º—ã –≤ Obsidian –±—ã–ª–∏ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–µ–µ –±–µ–∑¬†`init`-–±–ª–æ–∫–æ–≤, —Å–æ–∑–¥–∞–π —Å–Ω–∏–ø–ø–µ—Ç¬†`mermaid-contrast.css`¬†–∏ –≤–∫–ª—é—á–∏ –µ–≥–æ –≤ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –í–∏–¥ ‚Üí CSS snippets:

```css
/* Mermaid –∫–æ–Ω—Ç—Ä–∞—Å—Ç –¥–ª—è —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã Obsidian */
.theme-dark .markdown-preview-view .mermaid svg .edgePath path {
  stroke: #5ED3F3 !important;
  stroke-width: 2.5px !important;
}
.theme-dark .markdown-preview-view .mermaid svg .marker path {
  fill: #5ED3F3 !important;
}
.theme-dark .markdown-preview-view .mermaid svg .cluster rect {
  fill: #0b192f !important;
  stroke: #5ED3F3 !important;
}
.theme-dark .markdown-preview-view .mermaid svg .node rect,
.theme-dark .markdown-preview-view .mermaid svg .node circle,
.theme-dark .markdown-preview-view .mermaid svg .node ellipse,
.theme-dark .markdown-preview-view .mermaid svg .node polygon {
  stroke-width: 1.4px !important;
}
/* –û—Ç—Å—Ç—É–ø—ã –≤–æ–∫—Ä—É–≥ –¥–∏–∞–≥—Ä–∞–º–º, —á—Ç–æ–±—ã —Ç–µ–∫—Å—Ç –Ω–µ –Ω–∞–ø–ª—ã–≤–∞–ª */
.markdown-preview-view .mermaid {
  margin: 16px 0 !important;
}
```

–ì–æ—Ç–æ–≤–æ. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –¥–æ–±–∞–≤–ª—é —Å—é–¥–∞ –µ—â—ë –ø–∞—Ä—ã –ø–æ–¥ —Ç–≤–æ–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–æ–¥—É–ª–∏ (Orders, Payments –∏ —Ç.–¥.).